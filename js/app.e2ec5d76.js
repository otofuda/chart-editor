(function(e){function t(t){for(var i,s,r=t[0],l=t[1],c=t[2],d=0,p=[];d<r.length;d++)s=r[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&p.push(o[s][0]),o[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);u&&u(t);while(p.length)p.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,r=1;r<n.length;r++){var l=n[r];0!==o[l]&&(i=!1)}i&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},o={app:0},a=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/chart-editor/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0284":function(e,t,n){},"02af":function(e,t,n){},"2d1d":function(e,t,n){"use strict";n("ce15")},"39a5":function(e,t,n){},"50d0":function(e,t,n){"use strict";n("7b99")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"app"}},[n("Preview",{attrs:{currentChart:e.currentChart,currentDifficulty:e.currentDifficulty,infoObject:e.chartObject.info,measureData:e.measureData,audioVolume:e.audioVolume,previewAudio:e.previewAudio,appendNote:e.getAppendNote,preAppendNotes:e.preAppendNotes,isShowDetail:e.isShowDetail,isCaptureMode:e.isCaptureMode,isPreviewMode:e.isPreviewMode}}),n("v-container",{staticClass:"panel",attrs:{fluid:""}},[n("img",{staticClass:"logo",attrs:{src:"https://otofuda.github.io/chart-editor/logo.png",alt:"Otofuda Chart Editor V2"}}),n("h3",[e._v("譜面ファイル")]),n("v-row",{attrs:{align:"center"}},[n("v-file-input",{attrs:{accept:".json, application/json",label:"ファイルを選択","hide-details":"",outlined:"",dense:"","prepend-icon":"mdi-folder"},on:{change:e.readFile}}),n("v-col",[n("v-select",{attrs:{items:e.difficulties,label:"難易度",align:"left","hide-details":"",outlined:"",dense:""},model:{value:e.currentDifficulty,callback:function(t){e.currentDifficulty=t},expression:"currentDifficulty"}})],1)],1),n("h3",[e._v("ノートの挿入（仮配置："+e._s(e.preAppendNotes.size)+"個）")]),n("v-checkbox",{attrs:{label:"ノート挿入モード"},model:{value:e.isAppendMode,callback:function(t){e.isAppendMode=t},expression:"isAppendMode"}}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isAppendMode,expression:"isAppendMode"}]},[n("v-row",{attrs:{justify:"space-between"}},[n("v-checkbox",{staticClass:"mt-0 ml-3",attrs:{label:"編集小節を自動追従"},model:{value:e.isAutoFollow,callback:function(t){e.isAutoFollow=t},expression:"isAutoFollow"}}),n("v-btn",{staticClass:"ml-4 white--text",attrs:{color:"orange darken-4",text:""},on:{click:function(t){return e.appendSimultaneously(e.appendNote)}}},[e._v(" このノートのみを全難易度に同時挿入 "),n("v-icon",{attrs:{right:""}},[e._v("mdi-plus-circle")])],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12",sm:"3"}},[n("v-select",{attrs:{items:e.noteTypes,"hide-details":"",label:"ノート種別",outlined:"",dense:""},on:{change:e.changeAppendNoteType},model:{value:e.appendNote.type,callback:function(t){e.$set(e.appendNote,"type",t)},expression:"appendNote.type"}})],1),n("v-col",{attrs:{cols:"12",sm:"3"}},[n("v-text-field",{attrs:{label:"measure",outlined:"",dense:"","hide-details":"",type:"number",min:"0"},model:{value:e.appendNote.measure,callback:function(t){e.$set(e.appendNote,"measure",e._n(t))},expression:"appendNote.measure"}})],1),n("v-col",{attrs:{cols:"12",sm:"3"}},[n("v-text-field",{attrs:{label:"position",outlined:"",dense:"","hide-details":"",min:"0",max:e.appendNote.split-1,"background-color":"#f0f0b0"},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.placeNotes(e.appendNote)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.appendNoteToLeft(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"right",39,t.key,["Right","ArrowRight"])||"button"in t&&2!==t.button?null:e.appendNoteToRight(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.appendNoteToUp(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.appendNoteToDown(t)}]},model:{value:e.appendNote.position,callback:function(t){e.$set(e.appendNote,"position",e._n(t))},expression:"appendNote.position"}})],1),n("v-col",{attrs:{cols:"12",sm:"3"}},[n("v-combobox",{attrs:{items:[4,8,16,32,12,24,48],label:"split",outlined:"","hide-details":"",dense:""},model:{value:e.appendNote.split,callback:function(t){e.$set(e.appendNote,"split",e._n(t))},expression:"appendNote.split"}})],1)],1),e._l(e.noteOptions(e.appendNote),(function(t,i){return n("div",{key:"option_"+i,staticClass:"mb-4"},[n("v-text-field",{attrs:{"hide-details":"",label:t.label,type:t.type,"append-outer-icon":"mdi-help",outlined:"",dense:""},on:{"click:append-outer":function(n){return e.showSnackbar(t.label+"の説明："+t.desc)}},model:{value:e.appendNote.option[i],callback:function(t){e.$set(e.appendNote.option,i,t)},expression:"appendNote.option[i]"}})],1)})),94===e.appendNote.type?n("v-menu",{attrs:{"close-on-content-click":!1,"max-width":"600","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,o=t.attrs;return[n("v-btn",e._g(e._b({attrs:{color:"indigo",dark:""}},"v-btn",o,!1),i),[e._v(" テクスチャをデータベースから探す ")])]}}],null,!1,1726659821),model:{value:e.dialog.texture,callback:function(t){e.$set(e.dialog,"texture",t)},expression:"dialog.texture"}},[n("v-card",[n("v-tabs",{attrs:{"show-arrows":""},model:{value:e.textureCurrentTab,callback:function(t){e.textureCurrentTab=t},expression:"textureCurrentTab"}},[n("v-tabs-slider",{attrs:{color:"indigo"}}),e._l(e.textureTabs,(function(t){return n("v-tab",{key:t},[e._v(" "+e._s(t)+" ")])}))],2),n("v-tabs-items",{model:{value:e.textureCurrentTab,callback:function(t){e.textureCurrentTab=t},expression:"textureCurrentTab"}},e._l(e.textureTabs,(function(t){return n("v-tab-item",{key:t,staticClass:"px-6"},[n("v-row",e._l(e.texturePayload.contents.filter((function(e){return e.tab.includes(t)})),(function(t){return n("v-col",{key:t.id,attrs:{cols:"12",sm:"6",md:"4"}},[n("v-card",{staticClass:"texture-card",attrs:{elevation:"2"}},[n("v-img",{attrs:{src:t.url,height:"100px"}},[n("span",{staticClass:"texture-card__name"},[e._v(" "+e._s(t.name)+" ")])]),n("v-card-actions",{staticClass:"justify-end"},[n("v-btn",{attrs:{small:"",depressed:"",color:"primary"},on:{click:function(n){return e.setTexture(t)}}},[e._v(" これにする ")])],1)],1)],1)})),1)],1)})),1)],1)],1):e._e(),96===e.appendNote.type?n("v-color-picker",{attrs:{swatches:e.colorSwatches,"show-swatches":"",elevation:"2","hide-inputs":""},model:{value:e.appendNoteColorOption,callback:function(t){e.appendNoteColorOption=t},expression:"appendNoteColorOption"}}):e._e(),n("v-row",{attrs:{align:"center",justify:"space-between"}},[n("v-radio-group",{attrs:{row:"","prepend-icon":"mdi-view-column-outline",disabled:e.isLanelessNote(e.appendNote)},model:{value:e.appendNote.lane,callback:function(t){e.$set(e.appendNote,"lane",t)},expression:"appendNote.lane"}},e._l(5,(function(e){return n("v-radio",{key:e,attrs:{value:e}})})),1),n("div",[n("v-btn",{staticClass:"ml-1 white--text",attrs:{color:"green darken-1"},on:{click:function(t){return e.placeNotes(e.appendNote)}}},[e._v(" ノートを仮配置 "),n("v-icon",{attrs:{right:""}},[e._v("mdi-keyboard-return")])],1),n("v-badge",{attrs:{overlap:"",color:"orange darken-4",value:e.preAppendNotes.size,content:e.preAppendNotes.size}},[n("v-btn",{staticClass:"ml-4 white--text",attrs:{color:"orange darken-4"},on:{click:function(t){return e.appendNotes.apply(void 0,e.preAppendNotes)}}},[e._v(" 挿入する "),n("v-icon",{attrs:{right:""}},[e._v("mdi-plus-circle-outline")])],1)],1)],1)],1),n("div",{directives:[{name:"show",rawName:"v-show",value:2===e.appendNote.type,expression:"appendNote.type === 2"}],staticClass:"my-4"},[n("v-row",{attrs:{align:"center",justify:"space-between"}},[n("h4",[e._v("ロングノーツ編集")]),n("v-btn",{staticClass:"white--text",attrs:{color:"green darken-1"},on:{click:e.addEndToAppendNote}},[e._v(" 終点を追加 ")])],1),e._l(e.appendNote.end,(function(t,i){return n("EndForm",{key:"append_end_"+i,attrs:{end:t,parent:e.appendNote,index:i},on:{"delete-end":e.deleteEndOfAppendNote,"append-to-left":e.appendNoteToLeft,"append-to-right":e.appendNoteToRight,"append-to-up":e.appendNoteToUp,"append-to-down":e.appendNoteToDown,"place-notes":function(t){return e.placeNotes(e.appendNote)}}})}))],2)],2),n("h3",[e._v("プレビュー領域の設定")]),n("h5",[e._v("現在のハイスピードの速度値:"+e._s(e.musicBpm*e.beatHeight/100))]),n("v-slider",{attrs:{"thumb-size":24,"thumb-label":"always",min:"20",max:"300","append-icon":"mdi-magnify-plus-outline","prepend-icon":"mdi-magnify-minus-outline",step:"10"},on:{"click:append":e.zoomIn,"click:prepend":e.zoomOut},model:{value:e.beatHeight,callback:function(t){e.beatHeight=t},expression:"beatHeight"}}),n("v-row",{attrs:{align:"center"}},[n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-file-input",{attrs:{accept:"audio/*",label:"楽曲ファイル選択",outlined:"",dense:"","prepend-icon":"mdi-music"},on:{change:e.readAudioFile}})],1),n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-slider",{attrs:{"thumb-size":24,"thumb-label":"always",min:"0",max:"100","prepend-icon":"mdi-volume-high",step:"5"},model:{value:e.audioVolume,callback:function(t){e.audioVolume=t},expression:"audioVolume"}})],1)],1),n("v-row",{attrs:{align:"center"}},[n("v-text-field",{attrs:{suffix:"小節へ",outlined:"",dense:"","hide-details":""},model:{value:e.scrollTo,callback:function(t){e.scrollTo=e._n(t)},expression:"scrollTo"}}),n("v-btn",{staticClass:"ml-4",attrs:{color:"primary"},on:{click:function(t){return e.scrollToMeasure(e.scrollTo)}}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-arrow-right")]),e._v(" 遷移 ")],1)],1),n("v-row",[n("v-icon",[e._v("mdi-eye")]),n("v-checkbox",{staticClass:"ml-4",attrs:{label:"ノーツ詳細を表示"},model:{value:e.isShowDetail,callback:function(t){e.isShowDetail=t},expression:"isShowDetail"}}),n("v-checkbox",{staticClass:"ml-4",attrs:{disabled:!e.isShowDetail,label:"キャプチャ用モード"},model:{value:e.isCaptureMode,callback:function(t){e.isCaptureMode=t},expression:"isCaptureMode"}}),n("v-checkbox",{staticClass:"ml-4",attrs:{disabled:!e.isShowDetail||!e.isCaptureMode,label:"譜面プレビュー用"},model:{value:e.isPreviewMode,callback:function(t){e.isPreviewMode=t},expression:"isPreviewMode"}})],1),n("h3",[e._v("選択ノーツ（選択中："+e._s(e.selectionNumber)+"個）")]),n("v-row",{attrs:{align:"center"}},[n("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){e.dialog.batchcheck=!0}}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-checkbox-marked-circle-outline")]),e._v(" ノーツの一括選択 ")],1),n("v-btn",{attrs:{color:"warning",text:""},on:{click:e.selectionClear}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-select-off")]),e._v(" すべて選択解除 ")],1),n("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,o=t.attrs;return[n("v-btn",e._g(e._b({attrs:{color:"error",text:""},on:{click:function(t){e.dialog.selectionDelete=!0}}},"v-btn",o,!1),i),[n("v-icon",{attrs:{left:""}},[e._v("mdi-delete-forever")]),e._v(" 選択ノーツを削除 ")],1)]}}]),model:{value:e.dialog.selectionDelete,callback:function(t){e.$set(e.dialog,"selectionDelete",t)},expression:"dialog.selectionDelete"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("確認")]),n("v-card-text",[e._v(" 本当に選択したノーツ"+e._s(e.selectionNumber)+"個をすべて削除しますか？ ")]),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){e.dialog.selectionDelete=!1}}},[e._v(" キャンセル ")]),n("v-btn",{attrs:{color:"error",text:""},on:{click:e.selectionDelete}},[e._v(" 削除する ")])],1)],1)],1),n("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){e.dialog.checked=!0}}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-auto-fix")]),e._v(" ノーツの一括操作 ")],1)],1),n("h3",[e._v("譜面情報")]),n("v-row",{attrs:{align:"center"}},[n("v-col",[n("v-text-field",{attrs:{label:"オフセット",required:"",outlined:"",dense:""},model:{value:e.chartObject.info.offset,callback:function(t){e.$set(e.chartObject.info,"offset",e._n(t))},expression:"chartObject.info.offset"}})],1),n("v-col",[n("v-text-field",{attrs:{label:"BPM",required:"",outlined:"",dense:""},model:{value:e.chartObject.info.bpm,callback:function(t){e.$set(e.chartObject.info,"bpm",e._n(t))},expression:"chartObject.info.bpm"}})],1),n("v-col",[n("v-text-field",{attrs:{label:"拍子",required:"",outlined:"",dense:""},model:{value:e.chartObject.info.beat,callback:function(t){e.$set(e.chartObject.info,"beat",e._n(t))},expression:"chartObject.info.beat"}})],1)],1),n("v-row",[n("v-btn",{staticClass:"ml-1 mb-8",attrs:{color:"primary",text:""},on:{click:function(t){e.dialog.help=!0}}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-help-circle")]),e._v(" 使い方 ")],1),n("v-btn",{staticClass:"ml-1 mb-8",attrs:{color:"primary",text:""},on:{click:function(t){e.dialog.logs=!0}}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-message-outline")]),e._v(" メッセージログ ")],1),n("v-btn",{staticClass:"ml-1 mb-8",attrs:{color:"primary",text:""},on:{click:e.analyze}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-chart-timeline-variant")]),e._v(" 譜面分析 ")],1),n("v-btn",{staticClass:"ml-1 mb-8",attrs:{color:"success"},on:{click:e.saveFile}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-content-save")]),e._v(" 名前をつけて保存 ")],1),n("v-btn",{staticClass:"ml-1 mb-8",attrs:{color:"primary",text:""},on:{click:e.restoreBackup}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-file-restore")]),e._v(" 復元 ")],1)],1),e.dialog.logs?n("v-card",{staticClass:"mx-auto message-log",attrs:{elevation:"8"}},[n("v-card-title",[n("v-btn",{staticClass:"mr-4",attrs:{icon:""},on:{click:function(t){e.dialog.logs=!1}}},[n("v-icon",[e._v("mdi-close")])],1),e._v(" メッセージログ ")],1),n("v-virtual-scroll",{attrs:{bench:0,items:e.logs.slice().reverse(),height:"300","item-height":"64"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[n("v-list-item",{key:i,staticClass:"my-2",domProps:{textContent:e._s(i)}}),n("v-divider")]}}],null,!1,1874721697)})],1):e._e()],1),n("v-dialog",{attrs:{width:"800"},model:{value:e.dialog.help,callback:function(t){e.$set(e.dialog,"help",t)},expression:"dialog.help"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v(" エディタの使い方 ")]),n("v-card-text",[n("a",{attrs:{target:"_blank",rel:"noopener noreferrer"}},[e._v(" エディタの使い方 ")])]),n("v-card-text",[n("a",{attrs:{href:"https://github.com/mtsgi/fumenedit/blob/master/format.md",target:"_blank",rel:"noopener noreferrer"}},[e._v(" 譜面フォーマットについて ")])])],1)],1),n("v-dialog",{attrs:{width:"800"},model:{value:e.dialog.analyzer,callback:function(t){e.$set(e.dialog,"analyzer",t)},expression:"dialog.analyzer"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v(" 譜面分析 ("+e._s(e.currentDifficulty)+") ")]),n("v-card-text",[e._v(" ノーツ数："+e._s(e.analysisData.notesCount)+" "),n("br"),e._v(" オブジェクト数："+e._s(e.currentChart.size)+" "),n("br"),e._v(" 平均密度："+e._s(e.analysisData.notesCount/e.measureData.last.measureReachTime*1e3)+"Notes / 秒 ")]),n("v-divider"),e.dialog.analyzer?n("v-sparkline",{attrs:{labels:e.analysisData.trendLabels,value:e.analysisData.trendValues,gradient:["#f72047","#ffd200","#1feaea"],color:"black","line-width":"2",padding:"10",smooth:"3"}}):e._e(),e.dialog.analyzer?n("v-sparkline",{attrs:{value:e.analysisData.otofudaNotes,color:"orange","line-width":"2",height:"10",padding:"0",smooth:"0",fill:""}}):e._e(),n("v-card-text",{staticClass:"mt-4"},[e._v(" ▲音札ノーツの位置 ")]),n("v-simple-table",[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[e._v(" 種類別ノーツ数 ")]),n("th",{staticClass:"text-left"},[e._v(" 数 ")]),n("th",{staticClass:"text-left"},[e._v(" 割合 ")])])]),n("tbody",e._l(e.noteTypes,(function(t){return n("tr",{key:"note_count_"+t.value},[n("td",[e._v(e._s(t.text))]),n("td",[e._v(e._s(e.analysisData.typeCount[t.value]))]),n("td",[e._v(" "+e._s([1,2,3,4,5].includes(t.value)?Math.floor(e.analysisData.typeCount[t.value]/e.analysisData.notesCount*1e4)/100+"％":"－")+" ")])])})),0)])],1)],1),n("v-dialog",{attrs:{width:"800"},model:{value:e.dialog.checked,callback:function(t){e.$set(e.dialog,"checked",t)},expression:"dialog.checked"}},[n("v-card",[n("v-card-title",[n("v-icon",{attrs:{left:""}},[e._v("mdi-auto-fix")]),e._v(" 選択ノーツへの一括操作 "),n("v-spacer"),n("v-btn",{attrs:{icon:"",right:""},on:{click:function(t){e.dialog.checked=!1}}},[n("v-icon",[e._v("mdi-close")])],1)],1),n("v-divider"),n("v-card-title",[e._v(" 種別の変更 ")]),n("v-card-text",[n("p",[e._v(" 選択したノーツ(ロングノーツと音札ノーツを除く)を特定の種別に一括で変更します。 ")]),n("v-row",{staticClass:"mx-1",attrs:{align:"center"}},[n("v-text-field",{attrs:{type:"number",min:"1",max:"99",prefix:"Type:",outlined:"",dense:"","hide-details":""},model:{value:e.selectionTypeTo,callback:function(t){e.selectionTypeTo=e._n(t)},expression:"selectionTypeTo"}}),n("v-btn",{staticClass:"ml-4",attrs:{color:"primary"},on:{click:function(t){return e.selectionChangeType(e.selectionTypeTo)}}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-auto-fix")]),e._v(" 選択ノーツを全て種別変更 ")],1)],1)],1),n("v-divider"),n("v-card-title",[e._v(" レーンの変更 ")]),n("v-card-text",[n("p",[e._v(" 選択したノーツ(ロングノーツと音札ノーツを除く)を特定のレーンに一括で移動します。(選択範囲、または対象レーンに対して)同時押しを含む範囲に対して実行すると重複が発生します。 ")]),n("v-row",{staticClass:"mx-1",attrs:{align:"center"}},[n("v-text-field",{attrs:{type:"number",min:"1",max:"5",prefix:"Lane:",outlined:"",dense:"","hide-details":""},model:{value:e.selectionLaneTo,callback:function(t){e.selectionLaneTo=e._n(t)},expression:"selectionLaneTo"}}),n("v-btn",{staticClass:"ml-4",attrs:{color:"primary"},on:{click:function(t){return e.selectionChangeLane(e.selectionLaneTo)}}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-auto-fix")]),e._v(" 選択ノーツを全てレーン移動 ")],1)],1)],1),n("v-card-text",[n("p",[e._v(" 選択したノーツ(ロングノーツと音札ノーツを除く)のそれぞれのレーンを1～5の範囲内で加算または減算します。入力は「－4」～「＋4」の範囲。 ")]),n("v-row",{staticClass:"mx-1",attrs:{align:"center"}},[n("v-text-field",{attrs:{type:"number",min:"-4",max:"4",prefix:"値:",outlined:"",dense:"","hide-details":""},model:{value:e.selectionLaneAddition,callback:function(t){e.selectionLaneAddition=e._n(t)},expression:"selectionLaneAddition"}}),n("v-btn",{staticClass:"ml-4",attrs:{color:"primary"},on:{click:function(t){return e.selectionAddLane(e.selectionLaneAddition)}}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-auto-fix")]),e._v(" 各選択ノーツのレーンを加算または減算 ")],1)],1)],1)],1)],1),n("v-dialog",{attrs:{width:"800"},model:{value:e.dialog.batchcheck,callback:function(t){e.$set(e.dialog,"batchcheck",t)},expression:"dialog.batchcheck"}},[n("v-card",[n("v-card-title",[n("v-icon",{attrs:{left:""}},[e._v("mdi-checkbox-marked-circle-outline")]),e._v(" ノーツの一括選択 "),n("v-spacer"),n("v-btn",{attrs:{icon:"",right:""},on:{click:function(t){e.dialog.batchcheck=!1}}},[n("v-icon",[e._v("mdi-close")])],1)],1),n("v-divider"),n("v-card-title",[e._v(" 対象Type ")]),n("v-card-text",[n("p",[e._v(" 対象Typeに合致するノーツを選択対象に加えます。 "),n("a",{on:{click:function(t){e.batchSelectTypes=e.noteTypes.map((function(e){return e.value}))}}},[e._v(" すべて選択 ")]),e._v(" ・ "),n("a",{on:{click:function(t){e.batchSelectTypes=[]}}},[e._v("すべて解除")])]),e._l(e.noteTypes,(function(t){return n("v-checkbox",{key:"batch-select-type_"+t.value,staticClass:"d-inline-block mr-4",attrs:{label:t.text,value:t.value,"hide-details":""},model:{value:e.batchSelectTypes,callback:function(t){e.batchSelectTypes=t},expression:"batchSelectTypes"}})}))],2),n("v-divider"),n("v-card-title",[e._v(" 対象小節 ")]),n("v-card-text",[n("p",[e._v(" 対象小節の範囲内のノーツを選択対象に加えます。終了小節を0にすると譜面の最後までを対象とします。 ")]),n("v-row",{staticClass:"mx-1",attrs:{align:"center"}},[n("v-text-field",{staticClass:"mr-4",attrs:{type:"number",min:"0",prefix:"開始：",suffix:"小節",outlined:"",dense:"","hide-details":""},model:{value:e.batchSelectStart,callback:function(t){e.batchSelectStart=e._n(t)},expression:"batchSelectStart"}}),n("v-text-field",{attrs:{type:"number",min:"0",prefix:"終了：",suffix:"小節",outlined:"",dense:"","hide-details":""},model:{value:e.batchSelectEnd,callback:function(t){e.batchSelectEnd=e._n(t)},expression:"batchSelectEnd"}})],1)],1),n("v-card-text",[n("p",[e._v("予測される選択個数："+e._s(e.batchSelectTarget.size))])]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary"},on:{click:e.batchSelect}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-checkbox-marked-circle-outline")]),e._v(" すべて選択する ")],1)],1)],1)],1),n("v-snackbar",{attrs:{vertical:""},scopedSlots:e._u([{key:"action",fn:function(t){var i=t.attrs;return[n("v-btn",e._b({attrs:{color:"error",text:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",i,!1),[e._v(" 閉じる ")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.snackbarText)+" ")])],1)},a=[],s=(n("99af"),n("4de4"),n("7db0"),n("caad"),n("d81d"),n("b0c0"),n("a9e3"),n("d3b7"),n("ac1f"),n("2532"),n("3ca3"),n("1276"),n("ddb0"),n("2b3d"),n("2909")),r=n("5530"),l=n("0be7"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isObjectBasedPreview?n("div",{staticClass:"object-based-preview",style:{position:"relative"}},e._l(e.measureData,(function(t){return n("ObjectBasedMeasure",{key:"measure_"+t.measure,attrs:{measure:t,notes:e.getMeasureNotes(t.measure),currentDifficulty:e.currentDifficulty}})})),1):n("div",{ref:"preview",staticClass:"preview",class:{detail:e.isShowDetail,capture_mode:e.isCaptureMode,preview_mode:e.isPreviewMode,checkbox:e.isShowCheckbox},style:{position:e.isPreviewing?"fixed":"relative",height:e.entireHeight+"px",marginBottom:e.lift+"px",transform:0===e.drawOffset?null:"translateY("+e.drawOffset+"px)"}},[e._l(e.measureData,(function(t){return n("Measure",{key:"measure_"+t.measure,attrs:{measure:t,notes:e.getMeasureNotes(t.measure),currentDifficulty:e.currentDifficulty}})})),e._l(e.longNotes,(function(t,i){return n("LongNote",{key:"longnote_"+i,attrs:{note:t,measureData:e.measureData}})})),e.appendNote?n("NoteShadow",{attrs:{note:e.appendNote,measureData:e.measureData}}):e._e(),e._l(e.preAppendNotes,(function(t,i){return n("NoteShadow",{key:"shadow_"+t.measure+"_"+i,attrs:{note:t,measureData:e.measureData,isPreAppend:!0}})})),n("div",{ref:"LEDLeft",staticClass:"led left"}),n("div",{ref:"LEDRight",staticClass:"led right"})],2),n("div",{staticClass:"control"},[n("v-expansion-panels",{attrs:{accordionn:"",flat:"",tile:""}},[n("v-expansion-panel",[n("v-expansion-panel-header",[n("v-btn",{staticClass:"mr-1",attrs:{outlined:"",color:"success",disabled:e.isPreviewing||e.isObjectBasedPreview},on:{click:function(t){return t.stopPropagation(),e.previewStart(t)}}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-play")]),e._v(" 再生 ")],1),n("v-btn",{staticClass:"ml-2 mr-2",attrs:{outlined:"",color:"error"},on:{click:function(t){return t.stopPropagation(),e.previewStop(t)}}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-stop")]),e._v(" 停止 ")],1)],1),n("v-expansion-panel-content",[n("v-text-field",{staticClass:"mb-4",attrs:{"hide-details":"","prepend-icon":"mdi-numeric-0-box-multiple-outline",label:"再生開始小節",suffix:"小節から",outlined:"",dense:""},model:{value:e.startFrom,callback:function(t){e.startFrom=e._n(t)},expression:"startFrom"}}),n("h4",{staticClass:"my-2"},[n("v-icon",[e._v("mdi-music-note")]),e._v(" 表示とサウンド ")],1),n("v-checkbox",{staticClass:"mt-0",attrs:{label:"チェックボックスを表示","hide-details":""},model:{value:e.isShowCheckbox,callback:function(t){e.isShowCheckbox=t},expression:"isShowCheckbox"}}),n("v-checkbox",{staticClass:"mt-0",attrs:{label:"打鍵音を再生 (β)","hide-details":""},model:{value:e.isPlayKeySound,callback:function(t){e.isPlayKeySound=t},expression:"isPlayKeySound"}}),n("v-checkbox",{staticClass:"mt-0",attrs:{label:"LN終点音を再生 (α)","hide-details":""},model:{value:e.isPlayKeySoundEnd,callback:function(t){e.isPlayKeySoundEnd=t},expression:"isPlayKeySoundEnd"}}),n("v-checkbox",{staticClass:"mt-0",attrs:{label:"キービームとコンボを表示","persistent-hint":"",hint:"以下2つはこの機能が有効でない場合効果がありません"},model:{value:e.isShowKeybeam,callback:function(t){e.isShowKeybeam=t},expression:"isShowKeybeam"}}),n("v-checkbox",{staticClass:"mt-0 ml-6",attrs:{disabled:!e.isShowKeybeam,label:"フリックエフェクト (β)","hide-details":""},model:{value:e.isShowFlickEffect,callback:function(t){e.isShowFlickEffect=t},expression:"isShowFlickEffect"}}),n("v-checkbox",{staticClass:"mt-0 ml-6",attrs:{disabled:!e.isShowKeybeam,label:"LeapMotion補助線をシミュレート (α)","hide-details":""},model:{value:e.isShowHandguide,callback:function(t){e.isShowHandguide=t},expression:"isShowHandguide"}}),n("v-checkbox",{staticClass:"mt-0",attrs:{label:"LED制御をシミュレート (β)","hide-details":""},model:{value:e.isSimulateLED,callback:function(t){e.isSimulateLED=t},expression:"isSimulateLED"}}),n("v-checkbox",{staticClass:"mt-0",attrs:{label:"小節ガイド音を再生","hide-details":""},model:{value:e.isPlayGuide,callback:function(t){e.isPlayGuide=t},expression:"isPlayGuide"}}),n("v-switch",{attrs:{label:"Object表示モード"},model:{value:e.isObjectBasedPreview,callback:function(t){e.isObjectBasedPreview=t},expression:"isObjectBasedPreview"}}),n("h4",{staticClass:"my-4"},[n("v-icon",[e._v("mdi-tune")]),e._v(" 再生オプション ")],1),n("v-text-field",{staticClass:"my-2",attrs:{hint:"判定ラインを上に押し上げます","persistent-hint":"","append-icon":"mdi-arrow-collapse-up",label:"LIFT",outlined:"",dense:""},model:{value:e.lift,callback:function(t){e.lift=e._n(t)},expression:"lift"}}),n("v-text-field",{staticClass:"mb-2",attrs:{hint:"譜面領域上部を隠します","persistent-hint":"","append-icon":"mdi-arrow-collapse-down",label:"SUDDEN",outlined:"",dense:""},model:{value:e.sudden,callback:function(t){e.sudden=e._n(t)},expression:"sudden"}}),n("v-text-field",{attrs:{hint:"譜面領域下部を隠します","persistent-hint":"","append-icon":"mdi-eye-off",label:"HIDDEN",outlined:"",dense:""},model:{value:e.hidden,callback:function(t){e.hidden=e._n(t)},expression:"hidden"}}),n("h4",{staticClass:"my-4"},[n("v-icon",[e._v("mdi-tune")]),e._v(" 詳細設定 ")],1),n("v-text-field",{staticClass:"mb-2",attrs:{hint:"判定ラインの上側に移動します","persistent-hint":"","append-icon":"mdi-arrow-up",label:"コンボ表示位置",outlined:"",dense:""},model:{value:e.comboOffset,callback:function(t){e.comboOffset=e._n(t)},expression:"comboOffset"}}),n("v-text-field",{staticClass:"mb-2",attrs:{hint:"描画のみ位置をずらします","persistent-hint":"","append-icon":"mdi-arrow-expand-up",label:"判定位置調整(β)",outlined:"",dense:""},model:{value:e.drawOffset,callback:function(t){e.drawOffset=e._n(t)},expression:"drawOffset"}}),n("v-text-field",{attrs:{"append-icon":"mdi-arrow-expand-vertical",label:"キービームの長さ",suffix:"px",outlined:"","hide-details":"",dense:""},model:{value:e.keybeamLength,callback:function(t){e.keybeamLength=e._n(t)},expression:"keybeamLength"}}),n("v-subheader",[e._v("コンボ数の透明度")]),n("v-slider",{attrs:{"hide-details":"",max:"100",min:"0","thumb-label":""},model:{value:e.comboOpacity,callback:function(t){e.comboOpacity=e._n(t)},expression:"comboOpacity"}})],1)],1)],1)],1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isPreviewing,expression:"isPreviewing"}],staticClass:"lift",style:{height:e.lift+"px"}}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isPreviewing,expression:"isPreviewing"}],staticClass:"sudden",style:{height:e.sudden+"px"}}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isPreviewing,expression:"isPreviewing"}],staticClass:"hidden",style:{height:e.hidden+"px",bottom:e.lift-2+"px"}}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isPreviewing&&e.isShowKeybeam,expression:"isPreviewing && isShowKeybeam"}],staticClass:"combo",style:{opacity:String(Number(e.comboOpacity)/100),bottom:Number(e.lift)+Number(e.comboOffset)+"px"}},[n("strong",{ref:"currentCombo"},[e._v("0")]),e._v(" COMBO ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowKeybeam,expression:"isShowKeybeam"}],ref:"keybeams",staticClass:"keybeams",style:{bottom:e.lift-2+"px",height:e.keybeamLength+"px"}},e._l(6,(function(e){return n("div",{key:"keybeam"+e})})),0),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isPreviewing&&e.isShowHandguide,expression:"isPreviewing && isShowHandguide"}],ref:"handguide",staticClass:"handguide",style:{bottom:e.lift-1+"px"}})])},u=[],d=(n("4160"),n("4fad"),n("159b"),n("3835")),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"measure",class:{hiddenControl:e.notes.find((function(e){return 95===e.type&&0===e.position}))},style:{bottom:e.measure.measurePositionBottom+"px",height:e.measure.measureHeight+"px"}},[n("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,o=t.attrs;return[n("v-btn",e._g(e._b({attrs:{dark:"",icon:""},on:{click:function(t){e.copyToDifficulty=e.currentDifficulty,e.copyToMeasure=e.measure.measure}}},"v-btn",o,!1),i),[n("v-icon",[e._v("mdi-dots-vertical")])],1)]}}])},[n("v-list",[n("v-list-item",[n("v-list-item-title",[n("strong",[e._v(e._s(e.measure.measure)+" 小節")]),e._v(" （"+e._s(e.notes.size)+" OBJ） ")])],1),n("v-list-item",[e._v(" 到達時間："+e._s(e.measure.measureReachTime.toFixed(4))+"ms ")]),n("v-divider"),n("v-list-item",[n("strong",[e._v("小節内のノーツを")])]),n("v-list-item",{staticClass:"px-0 mx-2"},[n("v-btn",{attrs:{color:"primary",text:"",dense:""},on:{click:e.selectAll}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-select")]),e._v(" 全て選択 ")],1),n("v-btn",{attrs:{color:"warning",text:"",dense:""},on:{click:e.clearAll}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-select-off")]),e._v(" 全て選択解除 ")],1)],1),n("v-divider"),n("v-list-item",[n("strong",[e._v(e._s(e.measure.measure)+"小節内のノーツを対象に")])]),n("v-list-item",{staticClass:"px-0 mx-2"},[n("v-select",{attrs:{items:e.difficulties,label:"複製先難易度",align:"left","hide-details":"",outlined:"",dense:""},model:{value:e.copyToDifficulty,callback:function(t){e.copyToDifficulty=t},expression:"copyToDifficulty"}})],1),n("v-list-item",{staticClass:"px-0 mx-2"},[n("v-text-field",{attrs:{"hide-details":"",label:"複製先小節",outlined:"",dense:""},model:{value:e.copyToMeasure,callback:function(t){e.copyToMeasure=e._n(t)},expression:"copyToMeasure"}})],1),n("v-list-item",{staticClass:"px-0 mx-2"},[e._v(" 小節に "),n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:"",dense:""},on:{click:e.copyAll}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-content-copy")]),e._v(" 複製 ")],1),n("v-btn",{attrs:{color:"warning",text:"",dense:""},on:{click:e.moveAll}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-content-cut")]),e._v(" 移動 ")],1)],1),n("v-list-item",{staticClass:"px-0 mx-2 mb-2"},[e._v(" Option： "),n("v-radio-group",{attrs:{"hide-details":""},model:{value:e.copyOrMoveOnlySelected,callback:function(t){e.copyOrMoveOnlySelected=t},expression:"copyOrMoveOnlySelected"}},[n("v-radio",{attrs:{label:"すべてのノーツを対象",value:!1}}),n("v-radio",{attrs:{label:"チェック済みのみ対象",value:!0}})],1)],1)],1)],1),e._l(4,(function(t){return n("span",{key:t,staticClass:"measure__separator",style:{left:60*t-1+"px",height:e.measure.measureHeight+"px"}})})),n("span",{staticClass:"measure__number",domProps:{textContent:e._s(e.measure.measure)}}),e._l(e.notes.filter((function(e){return 2!==e.type})),(function(t,i){return n("Note",{key:"note_"+e.measure.measure+"_"+i,attrs:{note:t,measure:e.measure,currentChart:e.notes}})}))],2)},h=[],f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-menu",{attrs:{"close-on-click":!1,"close-on-content-click":!1,absolute:"",left:"","nudge-left":50,"max-width":240},scopedSlots:e._u([{key:"activator",fn:function(t){var i,o=t.on,a=t.attrs;return[n("span",e._g(e._b({staticClass:"note",class:(i={},i["type"+e.note.type]=!0,i.hidden=e.isHiddenControl,i.menu=e.menu,i),style:{left:e.positionLeft+"px",bottom:e.positionBottom+"px",width:e.noteWidth+"px",background:e.dispColor}},"span",a,!1),o),[94===e.note.type?n("img",{style:{height:e.measure.measureHeight*e.note.option[2]+"px"},attrs:{src:e.note.option[0],alt:"texture"}}):e._e(),100===e.note.type?n("v-icon",{staticClass:"mt-2",attrs:{color:"warning"}},[e._v(" mdi-comment ")]):e._e(),100===e.note.type?n("v-textarea",{staticClass:"elevation-4",attrs:{outlined:"","background-color":"amber lighten-4","hide-details":""},on:{click:function(e){e.stopPropagation()}},model:{value:e.note.option[0],callback:function(t){e.$set(e.note.option,0,t)},expression:"note.option[0]"}}):e._e(),n("input",{directives:[{name:"model",rawName:"v-model",value:e.note.isSelected,expression:"note.isSelected"}],attrs:{type:"checkbox",id:e.note.index},domProps:{checked:Array.isArray(e.note.isSelected)?e._i(e.note.isSelected,null)>-1:e.note.isSelected},on:{click:function(e){e.stopPropagation()},change:function(t){var n=e.note.isSelected,i=t.target,o=!!i.checked;if(Array.isArray(n)){var a=null,s=e._i(n,a);i.checked?s<0&&e.$set(e.note,"isSelected",n.concat([a])):s>-1&&e.$set(e.note,"isSelected",n.slice(0,s).concat(n.slice(s+1)))}else e.$set(e.note,"isSelected",o)}}}),e.isDuplicated(e.note)?n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,o=t.attrs;return[n("v-icon",e._g(e._b({staticClass:"mt-2",attrs:{color:"warning",dark:""}},"v-icon",o,!1),i),[e._v(" mdi-alert ")])]}}],null,!0)},[n("span",[e._v(e._s(e.isDuplicated(e.note))+"個の重複")])]):e._e(),e.hasError(e.note)?n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,o=t.attrs;return[n("v-icon",e._g(e._b({staticClass:"mt-2",attrs:{color:"error",dark:""}},"v-icon",o,!1),i),[e._v(" mdi-alert-circle-outline ")])]}}],null,!0)},[n("span",[e._v(e._s(e.hasError(e.note)))])]):e._e(),e._v(" "+e._s(e.note.position)+"/"+e._s(e.note.split)+" "),97===e.note.type?n("strong",[e._v("BEAT "+e._s(e.note.option[0]))]):e._e(),98===e.note.type?n("strong",[e._v("BPM "+e._s(e.note.option[0]))]):e._e(),99===e.note.type?n("strong",[e._v("EOF")]):e._e()],1)]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[e.menu?n("v-card",[n("v-list",[n("v-list-item",[n("v-card-text",[e._v("#"+e._s(e.note.index)+" "+e._s(e.noteTypeName))]),n("v-spacer"),n("v-btn",{attrs:{icon:"",right:""},on:{click:function(t){e.menu=!1}}},[n("v-icon",[e._v("mdi-close")])],1)],1),n("v-list-item",[n("v-row",[n("v-col",[n("v-text-field",{attrs:{value:e.note.measure,"hide-details":"",suffix:"小節",outlined:"",dense:""},on:{change:function(t){return e.note.measure=Number(t)},keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.stopPropagation(),e.menu=!1}}})],1)],1)],1),n("v-list-item",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-text-field",{attrs:{label:"position",outlined:"",dense:"","hide-details":"",type:"number"},model:{value:e.note.position,callback:function(t){e.$set(e.note,"position",e._n(t))},expression:"note.position"}})],1),n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-text-field",{attrs:{label:"split",outlined:"",dense:"","hide-details":"",type:"number"},model:{value:e.note.split,callback:function(t){e.$set(e.note,"split",e._n(t))},expression:"note.split"}})],1)],1)],1),n("v-list-item",[e._v(" LANE "),n("v-spacer"),n("v-radio-group",{attrs:{row:"",disabled:e.isLanelessNote(e.note)},model:{value:e.note.lane,callback:function(t){e.$set(e.note,"lane",e._n(t))},expression:"note.lane"}},e._l(5,(function(e){return n("v-radio",{key:e,attrs:{value:e}})})),1)],1),n("v-list-item",[n("v-select",{attrs:{items:e.noteTypes,"hide-details":"",label:"ノート種別",align:"left",outlined:"",dense:""},model:{value:e.note.type,callback:function(t){e.$set(e.note,"type",t)},expression:"note.type"}})],1),e.noteOptions(e.note).length>0?n("v-list-item",[n("v-card-text",[e._v("オプション")]),n("v-spacer"),n("v-btn",{attrs:{href:"https://github.com/mtsgi/fumenedit/blob/master/format.md",target:"_blank",icon:"",right:""}},[n("v-icon",[e._v("mdi-help")])],1)],1):e._e(),e._l(e.noteOptions(e.note),(function(t,i){return n("v-list-item",{key:"option_"+i},[n("v-text-field",{attrs:{"hide-details":"",label:t.label,type:t.type,outlined:"",dense:""},model:{value:e.note.option[i],callback:function(t){e.$set(e.note.option,i,t)},expression:"note.option[i]"}})],1)}))],2),n("v-card-actions",[n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.cloneThisNote}},[n("v-icon",[e._v("mdi-content-copy")])],1),n("v-btn",{attrs:{color:"error",text:""},on:{click:e.deleteThisNote}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-delete")]),e._v(" 削除 ")],1),n("v-btn",{attrs:{color:"secondary",text:""},on:{click:e.showNoteInfo}},[n("v-icon",[e._v("mdi-information")])],1)],1)],1):e._e()],1)},v=[],m={data:function(){return{noteTypes:[{text:"通常",value:1},{text:"ロング",value:2},{text:"左フリック",value:3},{text:"右フリック",value:4},{text:"音札",value:5},{text:"テクスチャ",value:94},{text:"区切り線",value:95},{text:"LED制御",value:96},{text:"拍子変化",value:97},{text:"BPM変化",value:98},{text:"EOF",value:99},{text:"コメント",value:100}]}},methods:{noteOptions:function(e){return[3,4].includes(e.type)?[{label:"width",type:"number",desc:"Float型｜中心を基点とした横幅(単位：1レーンの幅)"},{label:"offsetNumer",type:"number",desc:"Integer型｜右側へのオフセット分数の分子"},{label:"offsetDenom",type:"number",desc:"Integer型｜右側へのオフセット分数の分母"}]:94===e.type?[{label:"source",type:"text",desc:"String型｜画像のソース(httpまたはhttpsプロトコル)"},{label:"width",type:"number",desc:"Float型｜中心を基点とした横幅(単位：1レーンの幅)"},{label:"height",type:"number",desc:"Float型｜下面を基点とした高さ(単位：1小節の高さ)"},{label:"offsetNumer",type:"number",desc:"Integer型｜右側へのオフセット分数の分子"},{label:"offsetDenom",type:"number",desc:"Integer型｜右側へのオフセット分数の分母"}]:95===e.type?[{label:"length",type:"number",desc:"Integer型｜左面を基点とした横幅(単位：1レーンの幅)"}]:96===e.type?[{label:"red",type:"number",desc:"Integer型｜0-255の整数"},{label:"green",type:"number",desc:"Integer型｜0-255の整数"},{label:"blue",type:"number",desc:"Integer型｜0-255の整数"}]:97===e.type?[{label:"beat",type:"number",desc:"Integer型｜変化後の[n/4拍子]の分子の値"}]:98===e.type?[{label:"bpm",type:"number",desc:"Float型｜変化後のBPMの値"}]:100===e.type?[{label:"comment",type:"text",desc:"String型｜コメント"}]:[]}}},b={methods:{isDuplicated:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{checkPreAppend:!0,comparators:null},n=t.comparators||this.currentChart;if(n){var i=e.position/e.split,o=0;return n.each((function(t){if(t.measure===e.measure&&t.lane===e.lane&&t.position/t.split===i){if(94===t.type||94===e.type)return;if([3,4,94,95].includes(t.type)&&[3,4,94,95].includes(e.type)&&t.type!==e.type)return;if(5===t.type&&2===e.type||2===t.type&&5===e.type)return;if(t.index===e.index)return;o++}})),t.checkPreAppend&&this.preAppendNotes&&this.preAppendNotes.each((function(t){if(t.measure===e.measure&&t.lane===e.lane&&t.position/t.split===i){if([3,4,94,95].includes(t.type)&&[3,4,94,95].includes(e.type)&&t.type!==e.type)return;if(5===t.type&&2===e.type||2===t.type&&5===e.type)return;o++}})),o}return 1/0},hasError:function(e){return e.split<=0?"splitの値は0より大きい必要があります。":e.position<0?"positionの値は0以上である必要があります。":e.position>=e.split?"positionの値はsplitの値未満である必要があります。":[-1,1,2,3,4,5].includes(e.lane)?![1,2,3,4,5,94,95,96,97,98,99,100].includes(e.type)&&"不正なノートタイプです。":"不正なノートのレーン位置です。"},getValidatedOptions:function(e){var t=[];return[1,2,5,99].includes(e.type)?t:[3,4].includes(e.type)?(t.append(e.option[0]?Number(e.option[0]):-1),e.option[1]&&e.option[2]&&t.append(Number(e.option[1]).floor,Number(e.option[2]).floor),t):[94].includes(e.type)?(t.append(e.option[0]||"https://via.placeholder.com/50x100"),t.append(e.option[1]?Number(e.option[1]):1),t.append(e.option[2]?Number(e.option[2]):.25),e.option[3]&&e.option[4]&&t.append(Number(e.option[3]).floor,Number(e.option[4]).floor),t):[95,97,98].includes(e.type)?95===e.type&&0===e.position?[-1]:(t.append(e.option[0]?Number(e.option[0]):-1),t):[100].includes(e.type)?(t.append(e.option&&e.option[0]?String(e.option[0]):""),t):Object(s["a"])(e.option)},isLanelessNote:function(e){return[5,96,97,98,99].includes(e.type)}}},y={mixins:[m,b],inject:["deleteNotes","setAppendNoteInfo","showSnackbar"],data:function(){return{menu:!1}},props:{note:{type:Object,required:!0},measure:{type:Object,required:!0},currentChart:{type:Array,required:!0}},methods:{deleteThisNote:function(){this.deleteNotes(this.note.index),this.menu=!1},cloneThisNote:function(){this.setAppendNoteInfo(Object(r["a"])({},this.note)),this.menu=!1,this.showSnackbar("挿入ノートに同じデータをセットしました")},showNoteInfo:function(){this.showSnackbar(JSON.stringify(this.note,null,2))}},computed:{positionLeft:function(){if([1,2,95,100].includes(this.note.type))return 60*(this.note.lane-1);if([3,4].includes(this.note.type)){var e=this.note.option[0]||3;-1===e&&(e=3);var t=60*(this.note.lane-1)+30,n=0;return this.note.option[1]&&this.note.option[2]&&(n=this.note.option[1]/this.note.option[2]*60),t-e/2*60+n}if(94===this.note.type){var i=this.note.option[1]||1,o=60*(this.note.lane-1)+30,a=0;return this.note.option[3]&&this.note.option[4]&&(a=this.note.option[3]/this.note.option[4]*60),o-i/2*60+a}return 96===this.note.type?-50:0},positionBottom:function(){return this.note.position/this.note.split*this.measure.measureHeight},noteWidth:function(){if([1,2,100].includes(this.note.type))return 60;if([3,4].includes(this.note.type)){var e=this.note.option[0]||3;return-1===e&&(e=3),60*e}if(94===this.note.type){var t=this.note.option[1]||1;return 60*t-1}if(95===this.note.type){var n=this.note.option[0]||1;return-1===n&&(n=1),0===this.note.position&&(n=5),60*n}return 96===this.note.type?40:300},isHiddenControl:function(){return 95===this.note.type&&0===this.note.position},noteTypeName:function(){var e,t=this;return null===(e=this.noteTypes.find((function(e){return e.value===t.note.type})))||void 0===e?void 0:e.text},dispColor:function(){return 96===this.note.type?"rgb(".concat(this.note.option[0],",").concat(this.note.option[1],",").concat(this.note.option[2],")"):null}}},x=y,_=(n("922e"),n("2877")),g=n("6544"),k=n.n(g),w=n("8336"),N=n("b0af"),S=n("99d9"),C=n("62ad"),O=n("132d"),T=n("8860"),D=n("da13"),A=n("e449"),j=n("67b6"),V=n("43a6"),P=n("0fd9"),L=n("b974"),M=n("2fa4"),E=n("8654"),$=n("a844"),B=n("3a2f"),I=Object(_["a"])(x,f,v,!1,null,"c17a4de4",null),F=I.exports;k()(I,{VBtn:w["a"],VCard:N["a"],VCardActions:S["a"],VCardText:S["b"],VCol:C["a"],VIcon:O["a"],VList:T["a"],VListItem:D["a"],VMenu:A["a"],VRadio:j["a"],VRadioGroup:V["a"],VRow:P["a"],VSelect:L["a"],VSpacer:M["a"],VTextField:E["a"],VTextarea:$["a"],VTooltip:B["a"]});var R={inject:["deleteNotes","appendNotes","showSnackbar","getMovedNote","copyNotesToDifficulty"],props:{notes:{type:Array,default:function(){return[]}},measure:{type:Object,required:!0},measureData:{type:Array,default:function(){return[]}},currentDifficulty:{type:String,default:"easy"}},data:function(){return{difficulties:["raku","easy","normal","hard","extra"],copyToDifficulty:this.currentDifficulty,copyToMeasure:0,copyOrMoveOnlySelected:!1}},methods:{selectAll:function(){this.notes.each((function(e){e.isSelected=!0}))},clearAll:function(){this.notes.each((function(e){e.isSelected=!1}))},copyAll:function(){var e=this,t=this.notes.filter((function(e){return 2!==e.type}));this.copyOrMoveOnlySelected&&(t=t.filter((function(e){return e.isSelected}))),this.currentDifficulty===this.copyToDifficulty?(this.appendNotes.apply(this,Object(s["a"])(t.map((function(t){return e.getMovedNote(Object(r["a"])({},t),e.copyToMeasure)})))),this.showSnackbar("対象の".concat(t.size,"ノーツに対して、").concat(this.measure.measure,"小節 => ").concat(this.copyToMeasure,"小節へ複製処理を行いました（ロングノーツを除く）"))):this.copyNotesToDifficulty.apply(this,[this.copyToDifficulty].concat(Object(s["a"])(t.map((function(t){return e.getMovedNote(Object(r["a"])({},t),e.copyToMeasure)})))))},moveAll:function(){var e=this,t=this.notes.filter((function(e){return 2!==e.type}));this.copyOrMoveOnlySelected&&(t=t.filter((function(e){return e.isSelected})));var n=t.map((function(e){return e.index}));this.currentDifficulty===this.copyToDifficulty?(this.appendNotes.apply(this,Object(s["a"])(t.map((function(t){return e.getMovedNote(Object(r["a"])({},t),e.copyToMeasure)})))),this.deleteNotes.apply(this,Object(s["a"])(n)),this.showSnackbar("対象の".concat(t.size,"ノーツに対して、").concat(this.measure.measure,"小節 => ").concat(this.copyToMeasure,"小節へ移動処理を行いました（ロングノーツを除く）"))):(this.copyNotesToDifficulty.apply(this,[this.copyToDifficulty].concat(Object(s["a"])(t.map((function(t){return e.getMovedNote(Object(r["a"])({},t),e.copyToMeasure)}))))),this.deleteNotes.apply(this,Object(s["a"])(n)))}},components:{Note:F}},H=R,z=(n("c0b1"),n("ce7e")),K=n("5d23"),q=Object(_["a"])(H,p,h,!1,null,"b49d3916",null),J=q.exports;k()(q,{VBtn:w["a"],VDivider:z["a"],VIcon:O["a"],VList:T["a"],VListItem:D["a"],VListItemTitle:K["b"],VMenu:A["a"],VRadio:j["a"],VRadioGroup:V["a"],VSelect:L["a"],VSpacer:M["a"],VTextField:E["a"]});var U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"object-based-measure"},[n("h3",[e._v(" "+e._s(e.measure.measure)+"小節 "),n("span",[e._v(" "+e._s(e.measure.measureBeat)+"/4拍子・"+e._s(e.measure.measureBpm)+"BPM ")])]),n("v-expansion-panels",{attrs:{dark:""}},e._l(e.notes,(function(t,i){return n("v-expansion-panel",{key:"note_"+e.measure.measure+"_"+i},[n("v-expansion-panel-header",{scopedSlots:e._u([e.hasError(t)?{key:"actions",fn:function(){return[n("v-icon",{attrs:{color:"error"}},[e._v(" mdi-alert-circle ")])]},proxy:!0}:null],null,!0)},[e._v(" #"+e._s(t.index)+" "+e._s(e.noteTypeName(t))+" "),n("span",[e._v("（"+e._s(t.position)+"/"+e._s(t.split)+"）")])]),n("v-expansion-panel-content",[e.hasError(t)?n("v-alert",{attrs:{type:"error"}},[e._v(" "+e._s(e.hasError(t))+" ")]):e._e(),n("v-text-field",{attrs:{value:t.measure,label:"小節",outlined:"",dense:"","hide-details":"",type:"number"},on:{change:function(e){return t.measure=Number(e)},keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.stopPropagation(),e.menu=!1}}}),n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-select",{attrs:{items:e.noteTypes,"hide-details":"",label:"ノート種別",align:"left",outlined:"",dense:""},model:{value:t.type,callback:function(n){e.$set(t,"type",n)},expression:"note.type"}})],1),n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-text-field",{attrs:{label:"lane",outlined:"",dense:"","hide-details":"",type:"number"},model:{value:t.lane,callback:function(n){e.$set(t,"lane",e._n(n))},expression:"note.lane"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-text-field",{attrs:{label:"position",outlined:"",dense:"","hide-details":"",type:"number"},model:{value:t.position,callback:function(n){e.$set(t,"position",e._n(n))},expression:"note.position"}})],1),n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-text-field",{attrs:{label:"split",outlined:"",dense:"","hide-details":"",type:"number"},model:{value:t.split,callback:function(n){e.$set(t,"split",e._n(n))},expression:"note.split"}})],1)],1),e._l(e.noteOptions(t),(function(i,o){return n("row",{key:"option_"+o},[n("v-text-field",{staticClass:"mb-4",attrs:{"hide-details":"",label:i.label,type:i.type,outlined:"",dense:""},model:{value:t.option[o],callback:function(n){e.$set(t.option,o,n)},expression:"note.option[i]"}})],1)})),2===t.type?n("div",{staticClass:"object-based-measure__children"},[n("ObjectBasedMeasure",{attrs:{measure:Object.assign({},e.measure,{measure:"[終点]",measureBeat:"-",measureBpm:"-"}),notes:t.end}})],1):e._e(),n("v-checkbox",{directives:[{name:"show",rawName:"v-show",value:void 0!==t.isSelected,expression:"note.isSelected !== undefined"}],attrs:{label:"選択"},model:{value:t.isSelected,callback:function(n){e.$set(t,"isSelected",n)},expression:"note.isSelected"}}),n("v-btn",{attrs:{color:"error",text:""},on:{click:function(n){return e.deleteNote(t)}}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-delete")]),e._v(" 削除 ")],1),n("v-btn",{attrs:{text:""},on:{click:function(n){e.showSnackbar(JSON.stringify(t,null,2))}}},[n("v-icon",[e._v("mdi-information")]),e._v(" ノート情報表示 ")],1)],2)],1)})),1)],1)},G=[],W={name:"ObjectBasedMeasure",mixins:[m,b],inject:["deleteNotes","showSnackbar"],components:{ObjectBasedMeasure:oe},props:{notes:{type:Array,default:function(){return[]}},measure:{type:Object,required:!0},measureData:{type:Array,default:function(){return[]}},currentDifficulty:{type:String,default:"easy"}},methods:{deleteNote:function(e){this.deleteNotes(e.index),this.menu=!1},noteTypeName:function(e){var t;return null===(t=this.noteTypes.find((function(t){return t.value===e.type})))||void 0===t?void 0:t.text}}},Y=W,Z=(n("8dae"),n("0798")),X=n("ac7c"),Q=n("cd55"),ee=n("49e2"),te=n("c865"),ne=n("0393"),ie=Object(_["a"])(Y,U,G,!1,null,"a354b458",null),oe=ie.exports;k()(ie,{VAlert:Z["a"],VBtn:w["a"],VCheckbox:X["a"],VCol:C["a"],VExpansionPanel:Q["a"],VExpansionPanelContent:ee["a"],VExpansionPanelHeader:te["a"],VExpansionPanels:ne["a"],VIcon:O["a"],VRow:P["a"],VSelect:L["a"],VTextField:E["a"]});var ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-menu",{attrs:{"close-on-click":!1,"close-on-content-click":!1,absolute:"",left:"","max-width":240},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,o=t.attrs;return[n("span",{staticClass:"note",class:"type"+e.note.type,style:{left:e.getLeft(e.note)+"px",bottom:e.getBottom(e.note)+"px",width:e.getWidth(e.note)+"px"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.note.isSelected,expression:"note.isSelected"}],attrs:{type:"checkbox",id:e.note.index},domProps:{checked:Array.isArray(e.note.isSelected)?e._i(e.note.isSelected,null)>-1:e.note.isSelected},on:{click:function(e){e.stopPropagation()},change:function(t){var n=e.note.isSelected,i=t.target,o=!!i.checked;if(Array.isArray(n)){var a=null,s=e._i(n,a);i.checked?s<0&&e.$set(e.note,"isSelected",n.concat([a])):s>-1&&e.$set(e.note,"isSelected",n.slice(0,s).concat(n.slice(s+1)))}else e.$set(e.note,"isSelected",o)}}}),e._v(e._s(e.note.position)+"/"+e._s(e.note.split))]),e._l(e.note.end,(function(t,a){return n("div",{key:a},[n("span",{staticClass:"note",class:"type"+t.type,style:{left:e.getLeft(t)+"px",bottom:e.getBottom(t)+"px",width:e.getWidth(t)+"px"}},[e._v(e._s(t.position)+"/"+e._s(t.split))]),n("i",e._g(e._b({staticClass:"note-hold",style:{bottom:e.getBottom(e.note)+"px",left:e.getLeft(t)+"px",height:e.getBottom(t)-e.getBottom(e.note)+"px"}},"i",o,!1),i))])}))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[e.menu?n("v-card",[n("v-list",[n("v-list-item",[n("v-card-text",[e._v("#"+e._s(e.note.index)+" ロング")]),n("v-spacer"),n("v-btn",{attrs:{icon:"",right:""},on:{click:function(t){e.menu=!1}}},[n("v-icon",[e._v("mdi-close")])],1)],1),n("v-card-text",{staticClass:"ml-4"},[e._v("始点")]),n("v-list-item",[n("v-row",[n("v-col",[n("v-text-field",{attrs:{value:e.note.measure,"hide-details":"",suffix:"小節",outlined:"",dense:""},on:{change:function(t){return e.note.measure=Number(t)}}})],1)],1)],1),n("v-list-item",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-text-field",{attrs:{label:"position",outlined:"",dense:"","hide-details":"",type:"number"},model:{value:e.note.position,callback:function(t){e.$set(e.note,"position",t)},expression:"note.position"}})],1),n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-text-field",{attrs:{label:"split",outlined:"",dense:"","hide-details":"",type:"number"},model:{value:e.note.split,callback:function(t){e.$set(e.note,"split",t)},expression:"note.split"}})],1)],1)],1),n("v-list-item",[n("v-radio-group",{attrs:{row:"","hide-details":""},model:{value:e.note.lane,callback:function(t){e.$set(e.note,"lane",t)},expression:"note.lane"}},e._l(5,(function(e){return n("v-radio",{key:e,attrs:{value:e}})})),1)],1),e._l(e.note.end,(function(t,i){return n("div",{key:"longnote_end_"+e.note.index+"_"+i},[n("v-divider"),n("v-card-text",{staticClass:"ml-4 mt-2"},[e._v("終点"+e._s(i))]),n("v-list-item",[n("v-row",[n("v-col",[n("v-text-field",{attrs:{value:t.measure,"hide-details":"",suffix:"小節",outlined:"",dense:""},on:{change:function(e){return t.measure=Number(e)}}})],1)],1)],1),n("v-list-item",[n("v-radio-group",{attrs:{row:"","hide-details":""},model:{value:t.lane,callback:function(n){e.$set(t,"lane",n)},expression:"end.lane"}},e._l(5,(function(e){return n("v-radio",{key:e,attrs:{value:e}})})),1)],1),n("v-list-item",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-text-field",{attrs:{label:"position",outlined:"",dense:"","hide-details":"",type:"number"},model:{value:t.position,callback:function(n){e.$set(t,"position",n)},expression:"end.position"}})],1),n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-text-field",{attrs:{label:"split",outlined:"",dense:"","hide-details":"",type:"number"},model:{value:t.split,callback:function(n){e.$set(t,"split",n)},expression:"end.split"}})],1)],1)],1)],1)}))],2),n("v-card-actions",{staticClass:"pt-0"},[n("v-btn",{attrs:{color:"error",text:""},on:{click:e.deleteThisNote}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-delete")]),e._v(" ノートを削除 ")],1)],1)],1):e._e()],1)},se=[],re={inject:["deleteNotes"],data:function(){return{menu:!1}},props:{note:{type:Object,required:!0},measureData:{type:Array,required:!0}},methods:{getLeft:function(e){return 60*(e.lane-1)+60},getBottom:function(e){return this.measureData[e.measure].measurePositionBottom+e.position/e.split*this.measureData[e.measure].measureHeight},getWidth:function(){return 60},deleteThisNote:function(){this.deleteNotes(this.note.index),this.menu=!1}}},le=re,ce=(n("50d0"),Object(_["a"])(le,ae,se,!1,null,"a4b85ed6",null)),ue=ce.exports;k()(ce,{VBtn:w["a"],VCard:N["a"],VCardActions:S["a"],VCardText:S["b"],VCol:C["a"],VDivider:z["a"],VIcon:O["a"],VList:T["a"],VListItem:D["a"],VMenu:A["a"],VRadio:j["a"],VRadioGroup:V["a"],VRow:P["a"],VSpacer:M["a"],VTextField:E["a"]});var de=function(){var e,t=this,n=t.$createElement,i=t._self._c||n;return i("div",[i("span",{staticClass:"note",class:(e={},e["type"+t.note.type]=!0,e.shadow=!t.isPreAppend,e.preappend=t.isPreAppend,e),style:{left:t.getAbsoluteLeft(t.note)+"px",bottom:t.getAbsoluteBottom(t.note)+"px",width:t.getWidth(t.note)+"px",background:t.dispColor},on:{click:t.calcelThisNote}},[94===t.note.type?i("img",{style:{height:this.measureData.last.measureHeight*t.note.option[2]+"px"},attrs:{src:t.note.option[0],alt:"texture"}}):t._e(),100===t.note.type?i("v-icon",{staticClass:"mt-2",attrs:{color:"warning"}},[t._v(" mdi-comment ")]):t._e(),100===t.note.type?i("v-textarea",{staticClass:"elevation-4",attrs:{outlined:"","background-color":"amber lighten-4","hide-details":"",disabled:""},model:{value:t.note.option[0],callback:function(e){t.$set(t.note.option,0,e)},expression:"note.option[0]"}}):t._e(),t._v(" "+t._s(t.note.position)+"/"+t._s(t.note.split)+" "),t.isPreAppend?i("span",{staticClass:"preappend__index"},[t._v("#"+t._s(t.note.index))]):t._e()],1),t._l(t.note.end,(function(e,n){var o;return i("div",{key:n},[i("span",{staticClass:"note",class:(o={},o["type"+e.type]=!0,o.shadow=!t.isPreAppend,o.preappend=t.isPreAppend,o),style:{left:t.getAbsoluteLeft(e)+"px",bottom:t.getAbsoluteBottom(e)+"px",width:t.getWidth(e)+"px"}},[t._v(" "+t._s(e.position)+"/"+t._s(e.split)+" ")]),i("i",{staticClass:"note-hold",class:{shadow:!t.isPreAppend,preappend:t.isPreAppend},style:{bottom:t.getAbsoluteBottom(t.note)+"px",left:t.getAbsoluteLeft(e)+"px",height:t.getAbsoluteBottom(e)-t.getAbsoluteBottom(t.note)+"px"}})])}))],2)},pe=[],he={inject:["cancelNote"],props:{note:{type:Object,required:!0},measureData:{type:Array,required:!0},isPreAppend:{type:Boolean,default:!1}},methods:{getLeft:function(e){if([1,2,95,100].includes(e.type))return 60*(e.lane-1);if([3,4].includes(e.type)){var t=e.option[0]||3;-1===t&&(t=3);var n=60*(e.lane-1)+30,i=0;return e.option[1]&&e.option[2]&&(i=e.option[1]/e.option[2]*60),n-t/2*60+i}if(94===e.type){var o=e.option[1]||1,a=60*(e.lane-1)+30,s=0;return e.option[3]&&e.option[4]&&(s=e.option[3]/e.option[4]*60),a-o/2*60+s}return 96===this.note.type?-50:0},getAbsoluteLeft:function(e){return this.getLeft(e)+60},getBottom:function(e){var t=this.measureData[e.measure]||this.measureData.last;return e.position/e.split*t.measureHeight},getAbsoluteBottom:function(e){var t=this.measureData[e.measure];if(t)return t.measurePositionBottom+e.position/e.split*t.measureHeight;var n=this.measureData.last,i=e.measure-n.measure;return i*n.measureHeight+n.measurePositionBottom+e.position/e.split*n.measureHeight},getWidth:function(e){if([1,2,100].includes(e.type))return 60;if([3,4].includes(e.type)){var t=e.option[0]||3;return-1===t&&(t=3),60*t}if(94===e.type){var n=e.option[1]||1;return 60*n}if(95===e.type){var i=e.option[0]||1;return-1===i&&(i=1),0===e.position&&(i=5),60*i}return 96===this.note.type?40:300},calcelThisNote:function(){this.isPreAppend&&this.cancelNote(this.note.index)}},computed:{dispColor:function(){return 96===this.note.type?"rgb(".concat(this.note.option[0],",").concat(this.note.option[1],",").concat(this.note.option[2],")"):null}}},fe=he,ve=(n("eac6"),Object(_["a"])(fe,de,pe,!1,null,"3a0a7abe",null)),me=ve.exports;k()(ve,{VIcon:O["a"],VTextarea:$["a"]});var be=n("c0e9"),ye=n.n(be),xe={props:{currentChart:{type:Array,default:function(){return[]}},currentDifficulty:{type:String,default:"easy"},measureData:{type:Array,default:function(){return[]}},previewAudio:{type:HTMLAudioElement},audioVolume:{type:Number,default:100},infoObject:{type:Object,required:!0},appendNote:{type:Object},preAppendNotes:{type:Array},isShowDetail:{type:Boolean,default:!1},isCaptureMode:{type:Boolean,default:!1},isPreviewMode:{type:Boolean,default:!1}},data:function(){return{isPreviewing:!1,returnPosition:-1,currentPosition:0,timeoutIds:[],intervalId:null,startFrom:0,currentMeasure:0,currentBpm:0,currentBeat:0,currentCombo:0,isShowCheckbox:!1,isShowKeybeam:!1,isShowHandguide:!1,isShowFlickEffect:!1,isSimulateLED:!1,isPlayGuide:!1,eventIds:[],isPlayKeySound:!1,isPlayKeySoundEnd:!1,guideAudio:new Audio("/chart-editor/guide.mp3"),defaultLEDColor:"linear-gradient(0deg, #ff5151 30%, #44a5ff 70%)",lift:localStorage.getItem("chart-editor__lift")||0,sudden:localStorage.getItem("chart-editor__sudden")||0,hidden:localStorage.getItem("chart-editor__hidden")||0,comboOffset:60,drawOffset:0,keybeamLength:100,comboOpacity:50,isObjectBasedPreview:!1}},watch:{lift:function(e){return localStorage.setItem("chart-editor__lift",e)},sudden:function(e){return localStorage.setItem("chart-editor__sudden",e)},hidden:function(e){return localStorage.setItem("chart-editor__hidden",e)}},methods:{screenshot:function(){ye()(document.querySelector(".preview"),{allowTaint:!0}).then((function(e){document.querySelector(".panel").appendChild(e)}))},getMeasureNotes:function(e){return this.currentChart.filter((function(t){return t.measure===e}))},playFromMeasure:function(){var e=this,t=this.startOffset,n=60/this.infoObject.bpm*this.infoObject.beat*1e3;setTimeout((function(){e.previewAudio.volume=e.audioVolume/100,e.previewAudio.currentTime=t/1e3,e.previewAudio.play()}),n),this.measureData.forEach((function(n,i){var o=e.measureData[i+1]||{};n.measureReachTime>t&&e.timeoutIds.push(setTimeout((function(){e.currentPosition=o.measurePositionBottom;var t=o.measureReachTime-n.measureReachTime;e.$refs.preview.style.transition="".concat(t,"ms all linear"),e.$refs.preview.style.bottom="-".concat(e.currentPosition,"px"),e.isPlayGuide&&(e.guideAudio.currentTime=0,e.guideAudio.play())}),n.measureReachTime-t))})),this.setNoteEvents(t)},playFromZero:function(){var e=this;setTimeout((function(){e.previewAudio.currentTime=0,e.previewAudio.volume=e.audioVolume/100,e.previewAudio.play()}),60/this.infoObject.bpm*this.infoObject.beat*1e3);var t=Object(s["a"])(this.measureData);t.forEach((function(n,i){var o=t[i+1]||{};e.timeoutIds.append(setTimeout((function(){e.currentPosition=o.measurePositionBottom;var t=o.measureReachTime-n.measureReachTime;e.$refs.preview.style.transition="".concat(t,"ms all linear"),e.$refs.preview.style.bottom="-".concat(e.currentPosition,"px"),e.isPlayGuide&&(e.guideAudio.currentTime=.1,e.guideAudio.play())}),n.measureReachTime))})),this.setNoteEvents(0)},setNoteEvents:function(e){var t=this,n=-500,i=null,o=this.isShowFlickEffect,a=this.isShowHandguide;Object.entries(this.previewEvents).each((function(s){var r,l=Object(d["a"])(s,2),c=l[0],u=l[1],p=c-e,h=null===(r=t.$refs.keybeams)||void 0===r?void 0:r.querySelectorAll("div"),f=t.$refs.currentCombo,v=t.$refs.handguide;p>0?t.eventIds.push(setTimeout((function(){if(u.sound&&t.isPlayKeySound){var e=new Audio("/chart-editor/guide.mp3");e.currentTime=.1,e.play()}if(t.isShowKeybeam){if(u.lane.each((function(e){h[e].classList.add("-on")})),setTimeout((function(){u.lane.each((function(e){h[e].classList.remove("-on")}))}),25),u.hold.each((function(e){var n=Object(d["a"])(e,2),i=n[0],o=n[1];h[i].classList.add("-hold"),t.eventIds.push(setTimeout((function(){if(h[i].classList.remove("-hold"),t.currentCombo+=1,f.textContent=String(t.currentCombo),u.sound&&t.isPlayKeySound&&t.isPlayKeySoundEnd){var e=new Audio("/chart-editor/guide.mp3");e.currentTime=.1,e.play()}}),o))})),u.handMove&&o){var s=document.createElement("div");s.classList.add("flick-effect",u.handMove),t.$refs.keybeams.appendChild(s);var r=60*(u.noteObject.lane-1)+30,l=0,p=u.noteObject.option[0]||3;u.noteObject.option[1]&&u.noteObject.option[2]&&(l=u.noteObject.option[1]/u.noteObject.option[2]*60),s.style.left="".concat(r-p/2*60+l,"px"),s.style.width="".concat(60*p,"px"),setTimeout((function(){t.$refs.keybeams.removeChild(s)}),250)}t.currentCombo+=u.count,f.textContent=String(t.currentCombo)}a&&u.handMove&&(v.classList.add(u.handMove),c-n>200&&clearTimeout(i),i=setTimeout((function(){v.classList.remove(u.handMove)}),200),n=c),t.isSimulateLED&&u.color&&t.setLEDColor(u.color)}),p)):(t.currentCombo+=u.count+u.hold.size,t.isSimulateLED&&u.color&&t.setLEDColor(u.color))}))},previewStart:function(){this.returnPosition=window.scrollY,this.isPreviewing=!0,this.currentCombo=0,this.$refs.currentCombo.textContent=String(this.currentCombo),this.$refs.preview.style.transition="0ms all linear",this.$refs.preview.style.bottom="-".concat(this.measureData.first.measurePositionBottom,"px"),0===this.startFrom?this.playFromZero():this.playFromMeasure()},previewStop:function(){var e;this.previewAudio.pause(),this.isPreviewing=!1,this.currentPosition=0,this.currentBpm=0,this.currentBeat=0,this.currentCombo=0,this.setLEDColor(),null===(e=this.$refs.keybeams)||void 0===e||e.querySelectorAll("div").forEach((function(e){return e.classList.remove("-hold")})),this.$refs.handguide.classList.remove("-left","-right"),this.$refs.preview.style.transition="0ms all linear",this.$refs.preview.style.bottom="0px",this.timeoutIds.each((function(e){return clearInterval(e)})),this.timeoutIds=[],this.eventIds.each((function(e){return clearInterval(e)})),this.eventIds=[],this.returnPosition>=0&&this.$vuetify.goTo(this.returnPosition),this.returnPosition=-1},setLEDColor:function(e){this.$refs.LEDLeft.style.background=e||this.defaultLEDColor,this.$refs.LEDRight.style.background=e||this.defaultLEDColor}},computed:{longNotes:function(){return this.currentChart.filter((function(e){return 2===e.type}))},previewEvents:function(){var e=this,t={};return(this.isPlayKeySound||this.isShowKeybeam||this.isSimulateLED)&&this.currentChart.each((function(n){var i=e.measureData[n.measure],o=i.measureReachTime+n.position/n.split*i.measureLength;!t[o]&&[1,2,3,4,5,96].includes(n.type)&&(t[o]={timing:o,lane:[],hold:[],holdEnd:[],color:null,count:0,sound:!1,handMove:null,noteObject:{}}),1===n.type?(t[o].sound=!0,t[o].count+=1,t[o].lane=t[o].lane.append(n.lane).uniq):2===n.type?(t[o].sound=!0,n.end.each((function(i){var a=e.measureData[i.measure],s=a.measureReachTime+i.position/i.split*a.measureLength;t[o].hold=t[o].hold.append([n.lane,s-o])}))):3===n.type||4===n.type?(t[o].sound=!0,t[o].count+=1,t[o].noteObject=n,3===n.type?t[o].handMove="-left":t[o].handMove="-right"):5===n.type?(t[o].sound=!0,t[o].count+=1,t[o].lane=t[o].lane.append(0).uniq):96===n.type&&(t[o].color="rgb(".concat(n.option[0],",").concat(n.option[1],",").concat(n.option[2],")"))})),t},entireHeight:function(){var e,t;return(null===(e=this.measureData.last)||void 0===e?void 0:e.measurePositionBottom)+(null===(t=this.measureData.last)||void 0===t?void 0:t.measureHeight)},startOffset:function(){return this.measureData[this.startFrom].measureReachTime},previewDelay:function(){return 10*this.measureData.size+100}},components:{Measure:J,ObjectBasedMeasure:oe,LongNote:ue,NoteShadow:me}},_e=xe,ge=(n("2d1d"),n("ba0d")),ke=n("e0c7"),we=n("b73d"),Ne=Object(_["a"])(_e,c,u,!1,null,"a4a0b498",null),Se=Ne.exports;k()(Ne,{VBtn:w["a"],VCheckbox:X["a"],VExpansionPanel:Q["a"],VExpansionPanelContent:ee["a"],VExpansionPanelHeader:te["a"],VExpansionPanels:ne["a"],VIcon:O["a"],VSlider:ge["a"],VSubheader:ke["a"],VSwitch:we["a"],VTextField:E["a"]});var Ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mt-2"},[n("v-row",{attrs:{align:"center",justify:"space-between"}},[n("p",{staticClass:"mb-0"},[e._v("終点 #"+e._s(e.index))]),n("div",[n("v-btn",{attrs:{color:"primary",text:"",dense:""},on:{click:e.addEndToThis}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-plus-circle-outline")]),e._v(" ここに終点を追加 ")],1),n("v-btn",{attrs:{color:"error",text:"",dense:""},on:{click:e.deleteThisEnd}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-delete")]),e._v(" この終点を削除 ")],1)],1)]),n("v-row",[n("v-col",{attrs:{cols:"12",sm:"3"}},[n("v-select",{attrs:{items:[1,2,3,4,5],"hide-details":"",label:"lane",outlined:"",dense:""},model:{value:e.end.lane,callback:function(t){e.$set(e.end,"lane",t)},expression:"end.lane"}})],1),n("v-col",{attrs:{cols:"12",sm:"3"}},[n("v-text-field",{attrs:{label:"measure",outlined:"",dense:"","hide-details":"",type:"number",min:"0"},model:{value:e.end.measure,callback:function(t){e.$set(e.end,"measure",e._n(t))},expression:"end.measure"}})],1),n("v-col",{attrs:{cols:"12",sm:"3"}},[n("v-text-field",{attrs:{label:"position",outlined:"",dense:"","hide-details":"",min:"0",max:e.end.split-1,"background-color":"#f0f0b0"},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.placeNotes(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.endToLeft(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"right",39,t.key,["Right","ArrowRight"])||"button"in t&&2!==t.button?null:e.endToRight(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.endToUp(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.endToDown(t)}]},model:{value:e.end.position,callback:function(t){e.$set(e.end,"position",e._n(t))},expression:"end.position"}})],1),n("v-col",{attrs:{cols:"12",sm:"3"}},[n("v-combobox",{attrs:{items:[4,8,16,32,12,24,48],label:"split",outlined:"","hide-details":"",dense:""},model:{value:e.end.split,callback:function(t){e.$set(e.end,"split",e._n(t))},expression:"end.split"}})],1)],1),e._l(e.errors,(function(t){return n("v-alert",{key:"append_end_"+e.index+"_error"+t,attrs:{dense:"",outlined:"",type:"error"}},[e._v(" "+e._s(t)+" ")])})),n("div",{staticClass:"recursive-end"},e._l(e.end.end,(function(t,i){return n("EndForm",{key:"append_end_"+e.index+"_"+i,attrs:{end:t,parent:e.end,index:i},on:{"delete-end":e.deleteChild}})})),1)],2)},Oe=[],Te={name:"EndForm",props:{end:{type:Object,required:!0},parent:{type:Object,required:!0},index:{type:Number,required:!0}},methods:{addEndToThis:function(){this.end.end.append({type:1,lane:this.end.lane,measure:this.end.measure,position:Math.min(this.end.position+1,this.end.split),split:this.end.split,option:[],end:[]})},deleteThisEnd:function(){this.$emit("delete-end",this.index)},deleteChild:function(e){this.end.end.delete_at(e)},endToLeft:function(){this.end.lane=Math.max(this.end.lane-1,1),this.$emit("append-to-left",this.index)},endToRight:function(){this.end.lane=Math.min(this.end.lane+1,5),this.$emit("append-to-right",this.index)},endToUp:function(e){var t=this.end;t.split-1<=t.position?(t.measure++,t.position=0):t.position++,e.shiftKey&&this.$emit("append-to-up",this.index)},endToDown:function(){var e=this.end;0===e.position?(e.measure--,e.position=e.split-1):e.position--,event.shiftKey&&this.$emit("append-to-down",this.index)},placeNotes:function(){this.$emit("place-notes")}},computed:{parentPosition:function(){return this.parent.measure+this.parent.position/this.parent.split},selfPosition:function(){return this.end.measure+this.end.position/this.end.split},errors:function(){var e=[];return this.selfPosition<=this.parentPosition&&e.append("終点が親ノートよりも手前にあります。"),this.end.lane!==this.parent.lane&&e.append("終点と親ノートのレーン位置が異なります。"),e}},components:{EndForm:Ve}},De=Te,Ae=(n("68a3"),n("2b5d")),je=Object(_["a"])(De,Ce,Oe,!1,null,"15e6c967",null),Ve=je.exports;k()(je,{VAlert:Z["a"],VBtn:w["a"],VCol:C["a"],VCombobox:Ae["a"],VIcon:O["a"],VRow:P["a"],VSelect:L["a"],VTextField:E["a"]});var Pe={name:"App",mixins:[m,b],data:function(){return{isLoaded:!1,reader:new FileReader,previewAudio:new Audio,audioVolume:100,fileName:"default-song.json",difficulties:["raku","easy","normal","hard","extra"],currentDifficulty:"easy",chartObject:{raku:[],easy:[],normal:[],hard:[],extra:[],info:{offset:0,bpm:120,beat:4}},dialog:{selectionDelete:!1,analyzer:!1,help:!1,logs:!1,checked:!1,batchcheck:!1,texture:!1},texturePayload:{},textureTabs:[],textureCurrentTab:null,analysisData:{notesCount:0,trendValues:[],trendLabels:[],otofudaNotes:[],typeCount:{}},appendNote:{type:1,lane:1,measure:1,position:0,split:8,option:[],end:[]},preAppendNotes:[],colorSwatches:[["#ff5151","#000000"],["#44a5ff","#202020"],["#ff0000","#505050"],["#00ff00","#a0a0a0"],["#0000ff","#ffffff"]],isAppendMode:!0,isAutoFollow:!0,scrollTo:0,isShowDetail:!1,isCaptureMode:!1,isPreviewMode:!1,batchSelectTypes:[],batchSelectStart:0,batchSelectEnd:0,selectionLaneTo:1,selectionLaneAddition:1,selectionTypeTo:1,snackbar:!1,snackbarText:"メッセージ",logs:[],beatHeight:localStorage.getItem("chart-editor__beat-height")||100}},provide:function(){return{showSnackbar:this.showSnackbar,deleteNotes:this.deleteNotes,cancelNote:this.cancelNote,appendNotes:this.appendNotes,getMovedNote:this.getMovedNote,copyNotesToDifficulty:this.copyNotesToDifficulty,setAppendNoteInfo:this.setAppendNoteInfo}},beforeCreate:l["a"].init,created:function(){document.addEventListener("keydown",this.onPressKey)},mounted:function(){var e=this;this.reader.onload=function(t){e.chartObject=JSON.parse(t.target.result),e.difficulties.each((function(t){e.chartObject[t]=e.chartObject[t].map((function(e,t){return Object(r["a"])(Object(r["a"])({},e),{},{index:t,isSelected:!1})}))})),e.isLoaded=!0},window.addEventListener("beforeunload",(function(e){e.preventDefault(),e.returnValue="移動してもよろしいですか？"})),fetch("https://otofuda.microcms.io/api/v1/textures?limit=1000",{headers:{"X-API-KEY":"91c69bf8-3df5-445f-81e7-30b54ab4a7d4"}}).then((function(e){return e.json()})).then((function(t){e.texturePayload=t;var n=[];e.texturePayload.contents.each((function(e){return n.append.apply(n,Object(s["a"])(e.tab))})),e.textureTabs=n.uniq,e.textureCurrentTab=n.first}))},methods:{readFile:function(e){this.fileName=e.name,this.reader.readAsText(e)},newFile:function(){this.fileName="default.json",this.isLoaded=!0},saveFile:function(){var e=this,t={raku:[],easy:[],normal:[],hard:[],extra:[],info:Object(r["a"])({},this.chartObject.info)};this.difficulties.each((function(n){t[n]=e.chartObject[n].map((function(t){return{type:Number(t.type),measure:Number(t.measure),lane:Number(t.lane),position:Number(t.position),split:Number(t.split),option:e.getValidatedOptions(t),end:t.end||[]}}))})),console.log("saveObject",t);var n=new Blob([JSON.stringify(t,null,4)],{type:"application/json"}),i=document.createElement("a");i.href=URL.createObjectURL(n),i.download=this.fileName,document.body.appendChild(i),i.click(),document.body.removeChild(i),this.showSnackbar("ファイル「".concat(this.fileName,"」を保存しました"))},readAudioFile:function(e){this.previewAudio.src=window.URL.createObjectURL(e)},zoomOut:function(){this.beatHeight=this.beatHeight-10||0},zoomIn:function(){this.beatHeight=this.beatHeight+10||100},scrollToMeasure:function(e){var t,n=(null===(t=this.measureData.last)||void 0===t?void 0:t.measurePositionBottom)-this.measureData[e].measurePositionBottom;this.$vuetify.goTo(n)},appendNotes:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];n.each((function(t){var n,i=e.isDuplicated(t,{checkPreAppend:!1});if(i)return e.showSnackbar("".concat(i,"個のノーツと重複しているため、挿入できないノーツがありました")),!1;var o=0===e.currentChart.size?1:e.currentChart.max_by((function(e){return e.index})).index+1;null===(n=e.currentChart)||void 0===n||n.append(Object(r["a"])(Object(r["a"])({isSelected:!1},JSON.parse(JSON.stringify(t))),{},{index:o,option:e.getValidatedOptions(t)}))})),this.showSnackbar("".concat(n.size,"個のノートの挿入を試行しました")),this.preAppendNotes=[]},placeNotes:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];n.each((function(t){var n=e.isDuplicated(t);if(n)return e.showSnackbar("".concat(n,"個のノーツと重複しているため、配置はキャンセルされました")),!1;var i=0===e.preAppendNotes.size?1:e.preAppendNotes.max_by((function(e){return e.index})).index+1;e.preAppendNotes.append(Object(r["a"])(Object(r["a"])({isSelected:!1},JSON.parse(JSON.stringify(t))),{},{option:e.getValidatedOptions(t),index:i}))}))},appendSimultaneously:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];n.each((function(t){var n=0;e.difficulties.each((function(i){var o,a=e.isDuplicated(t,{comparators:e.chartObject[i]});if(a)return e.showSnackbar("".concat(a,"個のノーツと重複しているため、").concat(i,"に挿入できません")),!1;null===(o=e.chartObject[i])||void 0===o||o.append(Object(r["a"])(Object(r["a"])({isSelected:!1},JSON.parse(JSON.stringify(t))),{},{index:e.chartObject[i].size})),n++})),e.showSnackbar("ノートを".concat(n,"難易度に同時挿入しました"))}))},addEndToAppendNote:function(){this.appendNote.end.append({type:1,lane:this.appendNote.lane,measure:this.appendNote.measure,position:Math.min(this.appendNote.position+1,this.appendNote.split),split:this.appendNote.split,option:[],end:[]})},deleteEndOfAppendNote:function(e){this.appendNote.end.delete_at(e)},changeAppendNoteType:function(){2===this.appendNote.type?this.addEndToAppendNote():this.appendNote.end=[],94===this.appendNote.type?this.appendNote.option=["https://via.placeholder.com/50x100",1,.25]:96===this.appendNote.type?this.appendNote.option=[255,81,81]:3!==this.appendNote.type&&4!==this.appendNote.type||(this.appendNote.option=[-1,null,null]),this.isLanelessNote(this.appendNote)?this.appendNote.lane=-1:-1===this.appendNote.lane&&(this.appendNote.lane=1)},appendNoteToLeft:function(){this.appendNote.lane=Math.max(this.appendNote.lane-1,1)},appendNoteToRight:function(){this.appendNote.lane=Math.min(this.appendNote.lane+1,5)},appendNoteToUp:function(){var e=this.appendNote;e.split-1<=e.position?(e.measure++,e.position=0,this.isAutoFollow&&this.measureData[e.measure]&&this.scrollToMeasure(e.measure)):e.position++},appendNoteToDown:function(){var e=this.appendNote;0===e.position?(e.measure--,e.position=e.split-1,this.isAutoFollow&&this.scrollToMeasure(e.measure)):e.position--},deleteNotes:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];n.each((function(t){var n;e.chartObject[e.currentDifficulty]=null===(n=e.currentChart)||void 0===n?void 0:n.delete_if((function(e){return e.index===t}))}))},setAppendNoteInfo:function(e){this.appendNote=Object(r["a"])(Object(r["a"])(Object(r["a"])({},this.appendNote),e),{},{index:null})},cancelNote:function(e){var t;this.preAppendNotes=null===(t=this.preAppendNotes)||void 0===t?void 0:t.delete_if((function(t){return t.index===e}))},copyNotesToDifficulty:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentDifficulty,t=this.currentDifficulty;this.currentDifficulty=e;for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];this.appendNotes.apply(this,i),this.currentDifficulty=t},getMovedNote:function(e,t){var n=this,i=t-e.measure;return Object(r["a"])(Object(r["a"])({},e),{},{measure:t,end:e.end.map((function(e){n.getMovedNote(Object(r["a"])({},e),t+i)}))})},selectionClear:function(){var e;this.chartObject[this.currentDifficulty]=null===(e=this.currentChart)||void 0===e?void 0:e.map((function(e){return Object(r["a"])(Object(r["a"])({},e),{},{isSelected:!1})}))},selectionDelete:function(){var e,t=this.selectionNumber;this.chartObject[this.currentDifficulty]=null===(e=this.currentChart)||void 0===e?void 0:e.delete_if((function(e){return e.isSelected})),this.dialog.selectionDelete=!1,this.showSnackbar("".concat(t,"個のノーツを削除しました"))},selectionChangeType:function(e){var t=Number(e);if([2,5,94].includes(t))return this.showSnackbar("Typeを".concat(t,"に一括変更することはできません")),!1;var n=this.chartObject[this.currentDifficulty].filter((function(e){return e.isSelected&&![2,5].includes(e.type)}));if(0===n.size)return this.showSnackbar("対象ノーツがありません(Type一括変更)"),!1;n.each((function(e){return e.type=t})),this.showSnackbar("Type:".concat(t,"への一括変更を実行しました")),this.dialog.checked=!1},selectionChangeLane:function(e){var t=Number(e),n=this.chartObject[this.currentDifficulty].filter((function(e){return e.isSelected&&![2,5].includes(e.type)}));if(0===n.size)return this.showSnackbar("対象ノーツがありません(Lane一括変更)"),!1;n.each((function(e){return e.lane=t})),this.showSnackbar("Lane:".concat(t,"への一括変更を実行しました")),this.dialog.checked=!1},selectionAddLane:function(e){var t=Number(e),n=this.chartObject[this.currentDifficulty].filter((function(e){return e.isSelected&&![2,5].includes(e.type)}));if(0===n.size)return this.showSnackbar("対象ノーツがありません(Lane一括加算)"),!1;t<0?(n.each((function(e){return e.lane=Math.max(e.lane+t,1)})),this.showSnackbar("".concat(t," 一括減算処理を実行しました"))):(n.each((function(e){return e.lane=Math.min(e.lane+t,5)})),this.showSnackbar("+".concat(t," 一括加算処理を実行しました"))),this.dialog.checked=!1},batchSelect:function(){var e=this.batchSelectTarget.size;this.batchSelectTarget.each((function(e){return e.isSelected=!0})),this.dialog.batchcheck=!1,this.showSnackbar("".concat(e,"個のノーツを一括選択しました"))},showSnackbar:function(e){var t=this;this.snackbar=!1,this.snackbarText=e,setTimeout((function(){return t.snackbar=!0}),100),this.logs.append({message:e,type:"通知バー",date:new Date})},analyze:function(){var e=this;this.analysisData.trendLabels=[],this.analysisData.trendValues=[],this.analysisData.otofudaNotes=[],this.analysisData.notesCount=0,this.noteTypes.each((function(t){e.analysisData.typeCount[t.value]=0})),this.measureData.each((function(t){t.measure%10===0?e.analysisData.trendLabels.append(String(t.measure)):e.analysisData.trendLabels.append(" "),e.analysisData.trendValues.append(0),e.analysisData.otofudaNotes.append(0)})),this.currentChart.each((function(t){[1,2,3,4,5].includes(t.type)&&(e.analysisData.trendValues[t.measure]+=1,e.analysisData.notesCount+=1),5===t.type&&(e.analysisData.otofudaNotes[t.measure]+=1),e.analysisData.typeCount[t.type]+=1})),this.dialog.analyzer=!0},setTexture:function(e){var t=this.appendNote;94===t.type?(this.$set(t.option,0,e.url),this.$set(t.option,1,e.width||t.option[1]),this.showSnackbar("テクスチャ「".concat(e.name,"をセットしました"))):this.showSnackbar("挿入中のノートがテクスチャではありません")},restoreBackup:function(){var e=window.confirm("バックアップからデータを復元しますか？(現在の譜面データは失われます)");if(e){var t=localStorage.getItem("chart-editor__backup");this.chartObject=JSON.parse(t),this.showSnackbar("バックアップから復元しました")}},onPressKey:function(e){e.ctrlKey&&"s"===e.key&&(e.preventDefault(),console.log(JSON.stringify(this.chartObject)),localStorage.setItem("chart-editor__backup",JSON.stringify(this.chartObject)),this.showSnackbar("譜面バックアップを保存しました"))}},watch:{beatHeight:function(e){return localStorage.setItem("chart-editor__beat-height",e)}},computed:{currentChart:function(){return this.chartObject[this.currentDifficulty]||[]},musicBpm:function(){return this.chartObject.info.bpm},musicBeat:function(){return this.chartObject.info.beat},musicOffset:function(){return this.chartObject.info.offset},maxMeasure:function(){return this.currentChart.size>0?this.currentChart.max_by((function(e){return e.measure})).measure:1},measureData:function(){var e=this,t=[],n=this.musicBeat,i=this.musicBpm,o=this.musicOffset,a=this.musicOffset/(60/i*1e3)*this.beatHeight;return(this.maxMeasure+1).times((function(s){var r=e.currentChart.find((function(e){return 97===e.type&&e.measure===s})),l=e.currentChart.find((function(e){return 98===e.type&&e.measure===s}));r&&(n=r.option[0]),l&&(i=l.option[0]);var c=e.beatHeight*n,u=60/i*n*1e3;t.push({measure:s,measureBpm:i,measureBeat:n,measureReachTime:o,measurePositionBottom:a,measureHeight:c,measureLength:u}),o+=u,a+=e.beatHeight*n})),t},batchSelectTarget:function(){var e=this,t=this.batchSelectStart,n=0===this.batchSelectEnd?1/0:this.batchSelectEnd;return this.currentChart.filter((function(i){return e.batchSelectTypes.includes(i.type)&&i.measure>=t&&i.measure<=n}))},selectionNumber:function(){return this.currentChart.filter((function(e){return e.isSelected})).size},getAppendNote:function(){return this.isAppendMode?this.appendNote:null},appendNoteColorOption:{get:function(){return 96===this.appendNote.type?{r:this.appendNote.option[0],g:this.appendNote.option[1],b:this.appendNote.option[2],a:1}:null},set:function(e){96===this.appendNote.type&&(this.$set(this.appendNote.option,0,e.r),this.$set(this.appendNote.option,1,e.g),this.$set(this.appendNote.option,2,e.b))}}},components:{Preview:Se,EndForm:Ve}},Le=Pe,Me=(n("5c0b"),n("7496")),Ee=n("4ca6"),$e=n("03a4"),Be=n("a523"),Ie=n("169a"),Fe=n("23a7"),Re=n("adda"),He=n("1f4f"),ze=n("2db4"),Ke=n("7f2e"),qe=n("71a3"),Je=n("c671"),Ue=n("fe57"),Ge=n("aac8"),We=n("9a96"),Ye=n("0de5"),Ze=Object(_["a"])(Le,o,a,!1,null,null,null),Xe=Ze.exports;k()(Ze,{VApp:Me["a"],VBadge:Ee["a"],VBtn:w["a"],VCard:N["a"],VCardActions:S["a"],VCardText:S["b"],VCardTitle:S["c"],VCheckbox:X["a"],VCol:C["a"],VColorPicker:$e["a"],VCombobox:Ae["a"],VContainer:Be["a"],VDialog:Ie["a"],VDivider:z["a"],VFileInput:Fe["a"],VIcon:O["a"],VImg:Re["a"],VListItem:D["a"],VMenu:A["a"],VRadio:j["a"],VRadioGroup:V["a"],VRow:P["a"],VSelect:L["a"],VSimpleTable:He["a"],VSlider:ge["a"],VSnackbar:ze["a"],VSpacer:M["a"],VSparkline:Ke["a"],VTab:qe["a"],VTabItem:Je["a"],VTabs:Ue["a"],VTabsItems:Ge["a"],VTabsSlider:We["a"],VTextField:E["a"],VVirtualScroll:Ye["a"]});var Qe=n("f309"),et=n("dca6"),tt=n.n(et);i["a"].use(Qe["a"]);var nt=new Qe["a"]({lang:{locales:{ja:tt.a},current:"ja"}});i["a"].config.productionTip=!1,new i["a"]({vuetify:nt,render:function(e){return e(Xe)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";n("9c0c")},"68a3":function(e,t,n){"use strict";n("39a5")},"7b99":function(e,t,n){},"8dae":function(e,t,n){"use strict";n("02af")},"922e":function(e,t,n){"use strict";n("fd48")},"9c0c":function(e,t,n){},c0b1:function(e,t,n){"use strict";n("e6b3")},ce15:function(e,t,n){},e6b3:function(e,t,n){},eac6:function(e,t,n){"use strict";n("0284")},fd48:function(e,t,n){}});
//# sourceMappingURL=app.e2ec5d76.js.map