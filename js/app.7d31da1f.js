(function(t){function e(e){for(var r,a,s=e[0],u=e[1],c=e[2],p=0,f=[];p<s.length;p++)a=s[p],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&f.push(i[a][0]),i[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);l&&l(e);while(f.length)f.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,s=1;s<n.length;s++){var u=n[s];0!==i[u]&&(r=!1)}r&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},i={app:0},o=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var l=u;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"3db3":function(t,e,n){},4083:function(t,e,n){"use strict";var r=n("b871"),i=n.n(r);i.a},"4f88":function(t,e,n){"use strict";var r=n("c531"),i=n.n(r);i.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{id:"app"}},[n("Preview",{attrs:{currentChart:t.currentChart,measureData:t.measureData}}),n("v-container",{staticClass:"panel",attrs:{fluid:""}},[n("v-row",{attrs:{align:"center"}},[n("v-file-input",{attrs:{accept:".json, application/json",label:"ファイルを選択",outlined:"",dense:"","prepend-icon":"mdi-folder"},on:{change:t.readFile}}),n("v-col",[n("v-select",{attrs:{items:t.difficulties,label:"難易度",align:"left",outlined:"",dense:""},model:{value:t.currentDifficulty,callback:function(e){t.currentDifficulty=e},expression:"currentDifficulty"}})],1)],1),n("v-slider",{attrs:{min:"50",max:"200","append-icon":"mdi-magnify-plus-outline","prepend-icon":"mdi-magnify-minus-outline"},on:{"click:append":t.zoomIn,"click:prepend":t.zoomOut},model:{value:t.beatHeight,callback:function(e){t.beatHeight=e},expression:"beatHeight"}})],1)],1)},o=[],a=(n("7db0"),n("b0c0"),n("0be7")),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{ref:"preview",staticClass:"preview",style:{position:t.isPreviewing?"fixed":"relative",height:t.entireHeight+"px"}},[t._l(t.measureData,(function(e){return n("Measure",{key:e.measure,attrs:{measure:e,notes:t.currentChart.filter((function(t){return t.measure===e.measure}))}})})),t._l(t.currentChart.filter((function(t){return 2===t.type})),(function(e,r){return n("LongNote",{key:r,attrs:{note:e,measureData:t.measureData}})}))],2),n("div",{staticClass:"control"},[n("v-expansion-panels",{attrs:{accordion:""}},[n("v-expansion-panel",[n("v-expansion-panel-header"),n("v-expansion-panel-content",[n("v-btn",{staticClass:"mr-1",attrs:{outlined:"",color:"success"},on:{click:t.previewStart}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-play")]),t._v(" 再生 ")],1),n("v-btn",{staticClass:"ml-1",attrs:{outlined:"",color:"error"},on:{click:t.previewStop}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-stop")]),t._v(" 停止 ")],1)],1)],1)],1)],1)])},u=[],c=(n("4160"),n("159b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"measure",class:{hiddenControl:t.notes.find((function(t){return 95===t.type&&0===t.position}))},style:{bottom:t.measure.measurePositionBottom+"px",height:t.measure.measureHeight+"px"}},[t._v(" "+t._s(t.measure.measure)+" "),t._l(t.notes.filter((function(t){return 2!==t.type})),(function(e,r){return n("Note",{key:r,attrs:{note:e,measure:t.measure}})}))],2)}),l=[],p=function(){var t,e=this,n=e.$createElement,r=e._self._c||n;return r("span",{class:(t={},t["type"+e.note.type]=!0,t.hidden=e.isHiddenControl,t),style:{left:e.positionLeft+"px",bottom:e.positionBottom+"px",width:e.noteWidth+"px"}},[e._v(e._s(e.note.position)+"/"+e._s(e.note.split))])},f=[],m=(n("caad"),n("ac1f"),n("1276"),{data:function(){return{}},props:{note:{type:Object,required:!0},measure:{type:Object,required:!0}},computed:{positionLeft:function(){if([1,2,95].includes(this.note.type))return 60*(this.note.lane-1);if([3,4].includes(this.note.type)){var t=this.note.option[0]||3;-1===t&&(t=3);var e=60*(this.note.lane-1)+30,n=0;return this.note.option[1]&&this.note.option[2]&&(n=this.note.option[1]/this.note.option[2]*60),e-t/2*60+n}return 0},positionBottom:function(){return this.note.position/this.note.split*this.measure.measureHeight},noteWidth:function(){if([1,2].includes(this.note.type))return 60;if([3,4].includes(this.note.type)){var t=this.note.option[0]||1;return-1===t&&(t=3),60*t}if(95===this.note.type){var e=this.note.option[0]||1;return-1===e&&(e=1),0===this.note.position&&(e=5),60*e}return 300},isHiddenControl:function(){return 95===this.note.type&&0===this.note.position}}}),d=m,h=(n("4f88"),n("2877")),v=Object(h["a"])(d,p,f,!1,null,"7c4652ea",null),b=v.exports,y={props:{notes:{type:Array,default:function(){return[]}},measure:{type:Object,required:!0},measureData:{type:Array,default:function(){return[]}}},components:{Note:b}},g=y,x=(n("d1b6"),Object(h["a"])(g,c,l,!1,null,"51fe2106",null)),w=x.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",{class:"type"+t.note.type,style:{left:t.getLeft(t.note)+"px",bottom:t.getBottom(t.note)+"px",width:t.getWidth(t.note)+"px"}},[t._v(t._s(t.note.position)+"/"+t._s(t.note.split))]),t._l(t.note.end,(function(e,r){return n("div",{key:r},[n("span",{class:"type"+e.type,style:{left:t.getLeft(e)+"px",bottom:t.getBottom(e)+"px",width:t.getWidth(e)+"px"}},[t._v(t._s(t.note.position)+"/"+t._s(t.note.split))]),n("i",{style:{bottom:t.getBottom(t.note)+"px",left:t.getLeft(e)+"px",height:t.getBottom(e)-t.getBottom(t.note)+"px"}})])}))],2)},O=[],j={props:{note:{type:Object,required:!0},measureData:{type:Array,required:!0}},methods:{getLeft:function(t){return 60*(t.lane-1)+40},getBottom:function(t){return this.measureData[t.measure].measurePositionBottom+t.position/t.split*this.measureData[t.measure].measureHeight},getWidth:function(){return 60}}},P=j,D=(n("9029"),Object(h["a"])(P,_,O,!1,null,"5ad79294",null)),B=D.exports,C={data:function(){return{isPreviewing:!1,currentPosition:0,timeoutIds:[]}},props:{currentChart:{type:Array,default:function(){return[]}},measureData:{type:Array,default:function(){return[]}}},methods:{playFromMeasure:function(){var t=this;this.measureData.forEach((function(e,n){var r=t.measureData[n+1]||{};t.timeoutIds.append(setTimeout((function(){t.currentPosition=r.measurePositionBottom;var n=r.measureReachTime-e.measureReachTime;t.$refs.preview.style.transition="".concat(n,"ms all linear"),t.$refs.preview.style.bottom="-".concat(t.currentPosition,"px")}),e.measureReachTime))}))},previewStart:function(){this.isPreviewing=!0,this.$refs.preview.style.transition="0ms all linear",this.$refs.preview.style.bottom="0px",this.$refs.preview.style.transition="".concat(this.measureData.first.measureReachTime,"ms all linear"),this.$refs.preview.style.bottom="-".concat(this.measureData.first.measurePositionBottom,"px"),this.playFromMeasure()},previewStop:function(){this.isPreviewing=!1,this.currentPosition=0,this.$refs.preview.style.bottom="0px",this.timeoutIds.forEach((function(t){return clearInterval(t)}))}},computed:{entireHeight:function(){var t,e;return(null===(t=this.measureData.last)||void 0===t?void 0:t.measurePositionBottom)+(null===(e=this.measureData.last)||void 0===e?void 0:e.measureHeight)}},components:{Measure:w,LongNote:B}},H=C,L=(n("4083"),n("6544")),k=n.n(L),V=n("8336"),$=n("cd55"),S=n("49e2"),E=n("c865"),M=n("0393"),T=n("132d"),A=Object(h["a"])(H,s,u,!1,null,"747941c8",null),I=A.exports;k()(A,{VBtn:V["a"],VExpansionPanel:$["a"],VExpansionPanelContent:S["a"],VExpansionPanelHeader:E["a"],VExpansionPanels:M["a"],VIcon:T["a"]});var N={name:"App",data:function(){return{isLoaded:!1,reader:new FileReader,fileName:"default-song.json",difficulties:["raku","easy","normal","hard","extra"],currentDifficulty:"easy",chartObject:{},beatHeight:100}},mounted:function(){var t=this;a["a"].init(),this.reader.onload=function(e){t.chartObject=JSON.parse(e.target.result),t.isLoaded=!0}},methods:{readFile:function(t){this.fileName=t.name,this.reader.readAsText(t)},zoomOut:function(){this.beatHeight=this.beatHeight-10||0},zoomIn:function(){this.beatHeight=this.beatHeight+10||100}},computed:{currentChart:function(){return this.isLoaded?this.chartObject[this.currentDifficulty]:null},musicBpm:function(){return this.isLoaded?this.chartObject.info.bpm:null},musicBeat:function(){return this.isLoaded?this.chartObject.info.beat:null},musicOffset:function(){return this.isLoaded?this.chartObject.info.offset:null},maxMeasure:function(){return this.isLoaded?this.currentChart.max_by((function(t){return t.measure})).measure:1},measureData:function(){var t=this;if(!this.isLoaded)return[];var e=[],n=this.musicBeat,r=this.musicBpm,i=this.musicOffset,o=this.musicOffset/(60/r*1e3)*this.beatHeight;return this.maxMeasure.times((function(a){var s=t.currentChart.find((function(t){return 97===t.type&&t.measure===a})),u=t.currentChart.find((function(t){return 98===t.type&&t.measure===a}));s&&(n=s.option[0]),u&&(r=u.option[0]);var c=t.beatHeight*n;e.push({measure:a,measureBpm:r,measureBeat:n,measureReachTime:i,measurePositionBottom:o,measureHeight:c}),i+=60/r*n*1e3,o+=t.beatHeight*n})),e}},components:{Preview:I}},R=N,F=(n("5c0b"),n("7496")),q=n("62ad"),W=n("a523"),z=n("23a7"),J=n("0fd9"),G=n("b974"),K=n("ba0d"),Q=Object(h["a"])(R,i,o,!1,null,null,null),U=Q.exports;k()(Q,{VApp:F["a"],VCol:q["a"],VContainer:W["a"],VFileInput:z["a"],VRow:J["a"],VSelect:G["a"],VSlider:K["a"]});var X=n("f309"),Y=n("dca6"),Z=n.n(Y);r["a"].use(X["a"]);var tt=new X["a"]({lang:{locales:{ja:Z.a},current:"ja"}});r["a"].config.productionTip=!1,new r["a"]({vuetify:tt,render:function(t){return t(U)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var r=n("9c0c"),i=n.n(r);i.a},"842b":function(t,e,n){},9029:function(t,e,n){"use strict";var r=n("3db3"),i=n.n(r);i.a},"9c0c":function(t,e,n){},b871:function(t,e,n){},c531:function(t,e,n){},d1b6:function(t,e,n){"use strict";var r=n("842b"),i=n.n(r);i.a}});
//# sourceMappingURL=app.7d31da1f.js.map